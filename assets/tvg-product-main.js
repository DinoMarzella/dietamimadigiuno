(self["webpackChunktvg_shopify_theme"]=self["webpackChunktvg_shopify_theme"]||[]).push([[395],{464:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{
createRawItemPayload:()=>createRawItemPayload});const propKeyRe=/^properties\[(.*)\]$/i;const createRawItemPayload=function(pairs){return pairs.reduce((function(acc,param){let{name:name,value:value}=param;if("properties"===name)return acc
;if(0===name.indexOf("properties")){if(false===propKeyRe.test(name))return acc;const propKey=name.trim().replace(propKeyRe,"$1").trim();if(!propKey)return acc;acc.properties[propKey]=value;return acc}acc[name]=value;return acc}),{
properties:{}})}},644:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{cartDrawerOpenRequestEventType:()=>cartDrawerOpenRequestEventType,
sendCartDrawerOpenRequestEvent:()=>sendCartDrawerOpenRequestEvent});var superstruct__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(689);var _modules_fire_custom_document_event__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(47)
;const cartDrawerOpenRequestEventType="theme:cart_drawer_open_request";const CartDrawerOpenRequestEventType=(0,superstruct__WEBPACK_IMPORTED_MODULE_0__.literal)(cartDrawerOpenRequestEventType)
;const sendCartDrawerOpenRequestEvent=function(){(0,_modules_fire_custom_document_event__WEBPACK_IMPORTED_MODULE_1__.fireCustomEvent)(cartDrawerOpenRequestEventType,null)}},
47:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{fireCustomEvent:()=>fireCustomEvent});const fireCustomEvent=function(type,detail){if(!type){
console.error("Event type is invalid");return}const customEvt=new CustomEvent(type,{detail:detail});document.dispatchEvent(customEvt)}},65:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict"
;__webpack_require__.d(__webpack_exports__,{formatMoney:()=>formatMoney});const MONEY_FORMAT="${{amount}}";const format=function(){
let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:",",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"."
;if(isNaN(t))return"0";const r=(t/100).toFixed(e).split(".");const part=r[0]||"";return part.replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1"+o)+(r[1]?i+r[1]:"")};const r=/\{\{\s*(\w+)\s*\}\}/;const formatMoney=function(t){
let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:MONEY_FORMAT;const a=e||MONEY_FORMAT;const foundMatches=a.match(r);if(!foundMatches)throw new Error("Money template has no `{{amount}}` placeholder")
;const formatName=foundMatches[1]
;const i="amount"===formatName?format(t,2):"amount_no_decimals"===formatName?format(t,0):"amount_with_comma_separator"===formatName?format(t,2,".",","):"amount_with_space_separator"===formatName?format(t,2," ",","):"amount_with_period_and_space_separator"===formatName?format(t,2," ","."):"amount_no_decimals_with_comma_separator"===formatName?format(t,0,".",","):"amount_no_decimals_with_space_separator"===formatName?format(t,0," "):"amount_with_apostrophe_separator"===formatName?format(t,2,"'","."):t.toString(10)
;return a.replace(r,i)}},364:(__unused_webpack_module,__unused_webpack___webpack_exports__,__webpack_require__)=>{"use strict";var jquery_min=__webpack_require__(606);var jquery_min_default=__webpack_require__.n(jquery_min)
;var cart_drawer_open_request=__webpack_require__(644);var dist=__webpack_require__(689);var fire_custom_document_event=__webpack_require__(47);const productVariantSelectedEventType="theme:product_variant_selected"
;const ProductVariantSelectedEventType=(0,dist.literal)(productVariantSelectedEventType);const ProductVariantSelectedEventPayload=(0,dist.type)({productId:(0,dist.number)(),variantId:(0,dist.number)()});const ProductVariantSelectedEvent=(0,
dist.type)({type:ProductVariantSelectedEventType,detail:ProductVariantSelectedEventPayload});const sendProductVariantSelectedEvent=function(payload){(0,fire_custom_document_event.fireCustomEvent)(productVariantSelectedEventType,payload)}
;var preact_module=__webpack_require__(448);
/*!
 * Ported from Lodash
 */const rsAstralRange="\ud800-\udfff";const rsComboMarksRange="\\u0300-\\u036f";const reComboHalfMarksRange="\\ufe20-\\ufe2f";const rsComboSymbolsRange="\\u20d0-\\u20ff";const rsComboMarksExtendedRange="\\u1ab0-\\u1aff"
;const rsComboMarksSupplementRange="\\u1dc0-\\u1dff";const rsComboRange=rsComboMarksRange+reComboHalfMarksRange+rsComboSymbolsRange+rsComboMarksExtendedRange+rsComboMarksSupplementRange;const rsDingbatRange="\\u2700-\\u27bf"
;const rsLowerRange="a-z\\xdf-\\xf6\\xf8-\\xff";const rsMathOpRange="\\xac\\xb1\\xd7\\xf7";const rsNonCharRange="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf";const rsPunctuationRange="\\u2000-\\u206f"
;const rsSpaceRange=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000";const rsUpperRange="A-Z\\xc0-\\xd6\\xd8-\\xde"
;const rsVarRange="\\ufe0e\\ufe0f";const rsBreakRange=rsMathOpRange+rsNonCharRange+rsPunctuationRange+rsSpaceRange;const rsApos="['â€™]";const rsBreak=`[${rsBreakRange}]`;const rsCombo=`[${rsComboRange}]`;const rsDigit="\\d"
;const rsDingbat=`[${rsDingbatRange}]`;const rsLower=`[${rsLowerRange}]`;const rsMisc=`[^${rsAstralRange}${rsBreakRange+rsDigit+rsDingbatRange+rsLowerRange+rsUpperRange}]`;const rsFitz="\ud83c[\udffb-\udfff]"
;const rsModifier=`(?:${rsCombo}|${rsFitz})`;const rsNonAstral=`[^${rsAstralRange}]`;const rsRegional="(?:\ud83c[\udde6-\uddff]){2}";const rsSurrPair="[\ud800-\udbff][\udc00-\udfff]";const rsUpper=`[${rsUpperRange}]`;const rsZWJ="\\u200d"
;const rsMiscLower=`(?:${rsLower}|${rsMisc})`;const rsMiscUpper=`(?:${rsUpper}|${rsMisc})`;const rsOptContrLower=`(?:${rsApos}(?:d|ll|m|re|s|t|ve))?`;const rsOptContrUpper=`(?:${rsApos}(?:D|LL|M|RE|S|T|VE))?`;const reOptMod=`${rsModifier}?`
;const rsOptVar=`[${rsVarRange}]?`;const rsOptJoin=`(?:${rsZWJ}(?:${[rsNonAstral,rsRegional,rsSurrPair].join("|")})${rsOptVar+reOptMod})*`;const rsOrdLower="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])"
;const rsOrdUpper="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])";const rsSeq=rsOptVar+reOptMod+rsOptJoin;const rsEmoji=`(?:${[rsDingbat,rsRegional,rsSurrPair].join("|")})${rsSeq}`
;const reUnicodeWords=RegExp([`${rsUpper}?${rsLower}+${rsOptContrLower}(?=${[rsBreak,rsUpper,"$"].join("|")})`,`${rsMiscUpper}+${rsOptContrUpper}(?=${[rsBreak,rsUpper+rsMiscLower,"$"].join("|")})`,`${rsUpper}?${rsMiscLower}+${rsOptContrLower}`,`${rsUpper}+${rsOptContrUpper}`,rsOrdUpper,rsOrdLower,`${rsDigit}+`,rsEmoji].join("|"),"g")
;const unicodeWords=string=>string.match(reUnicodeWords);const hasUnicodeWord=RegExp.prototype.test.bind(/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/);const reAsciiWord=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g
;const asciiWords=string=>string.match(reAsciiWord);const words=(string,pattern)=>{if(void 0===pattern){const result=hasUnicodeWord(string)?unicodeWords(string):asciiWords(string);return result||[]}return string.match(pattern)||[]}
;const kebabCase=function(string){return words(string.replace(/['\u2019]/g,"")).reduce(((result,word,index)=>result+(index?"-":"")+word.toLowerCase()),"")};var hooks_module=__webpack_require__(461)
;const selectVariantReducer=function(state,action){const{optionsWithValues:optionsWithValues,variants:variants,selectedVariantId:prevSelectedVariantId}=state;if(0===variants.length)return state
;const prevSelectedVariant=variants.find((function(v){return v.id===prevSelectedVariantId}))||variants[0];if(null==prevSelectedVariant)return state;const{payload:{optionValue:triggerOptionValue,optionIndex:rawTriggerOptionIndex}}=action
;const triggerOptionIndex=Math.round(rawTriggerOptionIndex);const nextOptions=prevSelectedVariant.options.map((function(originalOption,originalOptionIndex){return originalOptionIndex===triggerOptionIndex?triggerOptionValue:originalOption}))
;const calculateCandidateWeight=function(variant){const weight=variant.options.reduce((function(acc,optionValue,optionIndex){const optionPositionBonus=1e3-500*optionIndex;const nextOptionValue=nextOptions[optionIndex]
;const optionMatch=optionValue===nextOptionValue?100+optionPositionBonus:0;const triggerOptionMatch=optionValue===triggerOptionValue&&optionIndex===triggerOptionIndex?100:0;const optionWithValues=optionsWithValues[optionIndex]
;if(null==optionWithValues)throw new Error("Option with values not found by index [c9b74da1a44a4766a923ad4577c712d9]");const allOptionValues=optionWithValues.values;const optionPosition=allOptionValues.findIndex((function(v){
return v===optionValue}));const nextOptionPosition=allOptionValues.findIndex((function(v){return v===nextOptionValue}));const proximity=Math.abs(optionPosition-nextOptionPosition)
;const proximityMatch=0===allOptionValues.length?0:0===proximity?250:proximity<=1?200:proximity<=3?150:proximity<=5?100:0;const adjustedProximityMatch=proximityMatch-10*optionIndex
;return acc+optionMatch+triggerOptionMatch+adjustedProximityMatch}),0);return-1*weight};const candidates=[...variants].sort((function(a,b){return calculateCandidateWeight(a)-calculateCandidateWeight(b)}));const selectedVariant=candidates[0]
;if(null==selectedVariant)return state;const selectedVariantId=selectedVariant.id;const selectedOptionIndex=null!=selectedVariant.options[triggerOptionIndex]?triggerOptionIndex:0
;const selectedOptionValue=selectedVariant.options[selectedOptionIndex];if(null==selectedOptionValue)return state;return{optionsWithValues:optionsWithValues,variants:variants,selectedVariantId:selectedVariantId,
selectedOptionIndex:selectedOptionIndex,selectedOptionValue:selectedOptionValue}};function r(e){var t,f,n=""
;if("string"==typeof e||"number"==typeof e)n+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(f=r(e[t]))&&(n&&(n+=" "),n+=f);else for(t in e)e[t]&&(n&&(n+=" "),n+=t);return n}function clsx(){
for(var e,t,f=0,n="";f<arguments.length;)(e=arguments[f++])&&(t=r(e))&&(n&&(n+=" "),n+=t);return n}const clsx_m=clsx;if(false);let random=bytes=>crypto.getRandomValues(new Uint8Array(bytes));let customRandom=(alphabet,size,getRandom)=>{
let mask=(2<<Math.log(alphabet.length-1)/Math.LN2)-1;let step=-~(1.6*mask*size/alphabet.length);return()=>{let id="";while(true){let bytes=getRandom(step);let j=step;while(j--){id+=alphabet[bytes[j]&mask]||"";if(id.length===size)return id}}
}};let customAlphabet=(alphabet,size)=>customRandom(alphabet,size,random);let nanoid=function(){let size=arguments.length>0&&void 0!==arguments[0]?arguments[0]:21;let id="";let bytes=crypto.getRandomValues(new Uint8Array(size))
;while(size--){let byte=63&bytes[size];if(byte<36)id+=byte.toString(36);else if(byte<62)id+=(byte-26).toString(36).toUpperCase();else if(byte<63)id+="_";else id+="-"}return id};const DICTIONARY="abcdefghijklmnopqrstuvwxyz0123456789"
;const customNanoId=customAlphabet(DICTIONARY,35);const genUid=function(){return"z"+customNanoId()};
/*!
 * Render product option selectors
 */
const ProductOptionsAsRadioButtons=function(param){let{optionNames:optionNames,optionValueGroups:optionValueGroups,dispatch:dispatch,focusedOptionIndex:focusedOptionIndex,focusOnIndex:focusOnIndex}=param;const[uid]=(0,
hooks_module.useState)(genUid);return(0,preact_module.h)("div",{className:"ProductRadioButtons"},optionNames.map((function(optionName,optionIndex){const optionGroup=optionValueGroups[optionIndex];if(null==optionGroup)return null;return(0,
preact_module.h)("div",{key:kebabCase(uid+optionName),className:clsx_m("ProductRadioButtons-group",{"has-singleOption":1===optionGroup.length})},(0,preact_module.h)("h5",{className:clsx_m("ProductRadioButtons-groupTitle",{
"ProductRadioButtons-groupTitle--focused":optionIndex===focusedOptionIndex})},optionName),optionGroup.map((function(optionValue){const{status:status}=optionValue;const name=kebabCase(`${uid}-${optionName}`)
;const id=kebabCase(`${name}-${optionValue.name}`);const checked="selected"===status;return(0,preact_module.h)("div",{key:id,className:clsx_m("ProductRadioButtons-item",{"ProductRadioButtons-item--selected":checked,
"ProductRadioButtons-item--unavailable":"unavailable"===status,"ProductRadioButtons-item--outOfStock":"out-of-stock"===status})},(0,preact_module.h)("input",{id:id,name:name,checked:checked,className:"ProductRadioButtons-itemRadio",
type:"radio",value:optionValue.name,onFocus:function(){focusOnIndex(optionIndex)},onClick:function(){focusOnIndex(optionIndex)},onInput:function(){dispatch({type:"SelectOption",payload:{optionIndex:optionIndex,optionValue:optionValue.name}
})}}),(0,preact_module.h)("label",{htmlFor:id,className:clsx_m("ProductRadioButtons-itemLabel",{"ProductRadioButtons-itemLabel--selected":checked,"ProductRadioButtons-itemLabel--unavailable":"unavailable"===status,
"ProductRadioButtons-itemLabel--outOfStock":"out-of-stock"===status})},optionValue.name))})))})))};
/*!
 * Render product option selectors
 */
const ProductOptionsAsDropdown=function(param){let{optionNames:optionNames,optionValueGroups:optionValueGroups,dispatch:dispatch,focusOnIndex:focusOnIndex,productId:productId}=param;const[uid]=(0,hooks_module.useState)(genUid);return(0,
preact_module.h)("div",{className:"ProductSelect"},optionNames.map((function(optionName,optionIndex){const optionGroup=optionValueGroups[optionIndex];if(null==optionGroup)return null;return(0,preact_module.h)("div",{
key:kebabCase(uid+optionName),className:clsx_m("ProductSelect-group")},(0,preact_module.h)("select",{className:clsx_m("ProductSelect-groupTitle"),id:kebabCase(`${"js-select"}-${productId}-${optionIndex}`),onFocus:function(){
focusOnIndex(optionIndex)},onClick:function(){focusOnIndex(optionIndex)},onChange:function(){focusOnIndex(optionIndex)},onInput:function(){const rawOptionName=jquery_min_default()("#js-select-"+productId+"-"+optionIndex).val()
;const inputOptionName="string"===typeof rawOptionName?rawOptionName:null;if(null==inputOptionName)return;dispatch({type:"SelectOption",payload:{optionIndex:optionIndex,optionValue:inputOptionName}})}},[optionGroup.filter((param=>{
let{status:status}=param;return"unavailable"!==status})).map((function(optionValue){const{status:status}=optionValue;const name=kebabCase(`${uid}-${optionName}`);const id=kebabCase(`${name}-${optionValue.name}`);return(0,
preact_module.h)("option",{id:id,name:name,selected:"selected"===status,value:optionValue.name},optionValue.name)}))]))})))};
/*!
 * Link product option selectors
 */
const getOptionValues=function(variants,optionNames){return optionNames.map((function(_,optionIndex){return variants.map((function(variant){return variant.options[optionIndex]})).filter((function ensurePresence(optionValue){
return Boolean(optionValue&&"string"===typeof optionValue)})).filter((function keepUniqueValuesOnly(optionValue,index,self){return self.indexOf(optionValue)===index}))}))};const filterProductOptions=function(param){
let{optionNames:optionNames,variants:allVariants,selectedOptions:selectedOptions}=param;const allOptionValues=getOptionValues(allVariants,optionNames);return allOptionValues.map((function(rowOptions,rowIndex){
const variants=allVariants.filter((v=>selectedOptions.slice(0,rowIndex).every(((selectedOption,selectedOptionIndex)=>v.options[selectedOptionIndex]===selectedOption))));return rowOptions.map((function(name){
const isSelected=selectedOptions[rowIndex]===name;if(isSelected)return{name:name,status:"selected"};const availableVariants=variants.filter((v=>v.options[rowIndex]===name));if(0===availableVariants.length)return{name:name,
status:"unavailable"};return{name:name,status:availableVariants.some((v=>v.available))?"in-stock":"out-of-stock"}}))}))};const updateUrl=function(param){let{inputUrl:inputUrl,productHandle:productHandle,variantId:variantId}=param
;const url=new URL(inputUrl);const pathSegments=url.pathname.split("/");const actualHandle=pathSegments[pathSegments.length-1];const pageType=pathSegments[pathSegments.length-2];if("products"!==pageType)return inputUrl
;if(actualHandle!==productHandle)return inputUrl;url.searchParams.set("variant",variantId.toString());return url.toString()};const updateAddressBar=function(param){let{productHandle:productHandle,variantId:variantId}=param;try{
const inputUrl=window.location.href;const nextUrl=updateUrl({inputUrl:inputUrl,productHandle:productHandle,variantId:variantId});if(nextUrl===inputUrl)return;window.history.replaceState(null,document.title,nextUrl)}catch(err){
console.error(err)}};const App=function(param){let{product:product,optionsWithValues:optionsWithValues,selectCallback:selectCallback,selectedVariantId:rawSelectedVariantId,settings:settings}=param;const[error]=(0,
hooks_module.useErrorBoundary)((function(err){console.error(err)}));const{id:productId,options:optionNames,variants:variants}=product;const initialSelectedVariant=variants.find((variant=>variant.id===rawSelectedVariantId))||variants[0]
;var _initialSelectedVariant_id,_initialSelectedVariant_options_;const[state,dispatch]=(0,hooks_module.useReducer)(selectVariantReducer,{optionsWithValues:optionsWithValues,variants:variants,
selectedVariantId:null!==(_initialSelectedVariant_id=null===initialSelectedVariant||void 0===initialSelectedVariant?void 0:initialSelectedVariant.id)&&void 0!==_initialSelectedVariant_id?_initialSelectedVariant_id:null,
selectedOptionIndex:0,
selectedOptionValue:null!==(_initialSelectedVariant_options_=null===initialSelectedVariant||void 0===initialSelectedVariant?void 0:initialSelectedVariant.options[0])&&void 0!==_initialSelectedVariant_options_?_initialSelectedVariant_options_:null
});const{selectedVariantId:selectedVariantId,selectedOptionValue:selectedOptionValue,selectedOptionIndex:selectedOptionIndex}=state;const[focusedOptionIndex,setFocusedOptionIndex]=(0,hooks_module.useState)(selectedOptionIndex)
;const focusOnIndex=(0,hooks_module.useCallback)((function(index){setFocusedOptionIndex(index)}),[setFocusedOptionIndex]);const selectedVariant=variants.find((function(variant){return variant.id===selectedVariantId}));(0,
hooks_module.useEffect)((function(){if(!selectedVariant)return;updateAddressBar({productHandle:product.handle,variantId:selectedVariant.id});selectCallback({product:product,selectedVariant:selectedVariant})
}),[product,selectCallback,selectedVariant]);if(null==selectedVariantId)return null;if(null==selectedVariant)throw new Error("Selected variant is invalid");if(null==selectedOptionValue)throw new Error("Selected option is null")
;const{options:selectedOptions}=selectedVariant;const optionValueGroups=filterProductOptions({optionNames:optionNames,selectedOptions:selectedOptions,variants:variants});if(error)return(0,preact_module.h)("div",{},"Internal error")
;return(0,preact_module.h)("div",{className:"ProductForm-options"},(0,preact_module.h)("input",{name:"id",type:"hidden",value:selectedVariantId,"data-product-id":product.id}),"radios"===settings.renderStyle?(0,
preact_module.h)(ProductOptionsAsRadioButtons,{optionNames:optionNames,optionValueGroups:optionValueGroups,dispatch:dispatch,focusedOptionIndex:focusedOptionIndex,focusOnIndex:focusOnIndex}):(0,preact_module.h)(ProductOptionsAsDropdown,{
optionNames:optionNames,optionValueGroups:optionValueGroups,dispatch:dispatch,focusedOptionIndex:focusedOptionIndex,focusOnIndex:focusOnIndex,productId:productId}))};const FeaturedVariantImage=(0,dist.type)({id:(0,dist.number)(),
position:(0,dist.number)(),alt:(0,dist.nullable)((0,dist.string)()),width:(0,dist.number)(),height:(0,dist.number)(),src:(0,dist.string)(),variant_ids:(0,dist.array)((0,dist.number)())});const FeaturedVariantMedia=(0,dist.type)({id:(0,
dist.number)()});const Variant=(0,dist.type)({id:(0,dist.number)(),title:(0,dist.string)(),option1:(0,dist.string)(),option2:(0,dist.nullable)((0,dist.string)()),option3:(0,dist.nullable)((0,dist.string)()),options:(0,dist.array)((0,
dist.string)()),sku:(0,dist.nullable)((0,dist.string)()),requires_shipping:(0,dist.boolean)(),taxable:(0,dist.boolean)(),available:(0,dist.boolean)(),name:(0,dist.string)(),public_title:(0,dist.nullable)((0,dist.string)()),price:(0,
dist.number)(),compare_at_price:(0,dist.nullable)((0,dist.number)()),weight:(0,dist.number)(),barcode:(0,dist.nullable)((0,dist.string)()),featured_image:(0,dist.nullable)(FeaturedVariantImage),featured_media:(0,dist.optional)((0,
dist.nullable)(FeaturedVariantMedia))});const Media=(0,dist.type)({id:(0,dist.number)(),position:(0,dist.number)(),media_type:(0,dist.string)()});const Product=(0,dist.type)({id:(0,dist.number)(),title:(0,dist.string)(),handle:(0,
dist.string)(),description:(0,dist.string)(),published_at:(0,dist.nullable)((0,dist.string)()),created_at:(0,dist.string)(),vendor:(0,dist.string)(),type:(0,dist.string)(),tags:(0,dist.array)((0,dist.string)()),price:(0,dist.number)(),
price_min:(0,dist.number)(),price_max:(0,dist.number)(),available:(0,dist.boolean)(),price_varies:(0,dist.boolean)(),compare_at_price:(0,dist.nullable)((0,dist.number)()),compare_at_price_min:(0,dist.nullable)((0,dist.number)()),
compare_at_price_max:(0,dist.nullable)((0,dist.number)()),compare_at_price_varies:(0,dist.boolean)(),variants:(0,dist.array)(Variant),images:(0,dist.array)((0,dist.string)()),options:(0,dist.array)((0,dist.string)()),media:(0,
dist.optional)((0,dist.array)(Media)),content:(0,dist.string)()});const OptionWithValues=(0,dist.type)({name:(0,dist.string)(),values:(0,dist.array)((0,dist.string)())});const OptionsWithValues=(0,dist.array)(OptionWithValues)
;const Settings=(0,dist.type)({renderStyle:(0,dist.union)([(0,dist.literal)("dropdowns"),(0,dist.literal)("radios")])});const SelectedVariantId=(0,dist.number)();const ProductOptionsIO=(0,dist.type)({product:Product,
optionsWithValues:OptionsWithValues,selectedVariantId:SelectedVariantId,settings:Settings});
/*!
 * Init linked product option selectors for multiple products
 */
const RENDER_TARGET_SELECTOR=".js-product-options-render-target";const load=function(container,selectCallback){var _product_variants_;const ioContainer=container.querySelector('script[type="application/json"]')
;const{product:product,optionsWithValues:optionsWithValues,selectedVariantId:selectedVariantId,settings:settings}=(0,dist.create)(JSON.parse(ioContainer?ioContainer.textContent||"":""),ProductOptionsIO)
;const renderTarget=container.querySelector(RENDER_TARGET_SELECTOR);if(!renderTarget)throw new Error("Render target element not found")
;if(1===product.variants.length&&kebabCase((null===(_product_variants_=product.variants[0])||void 0===_product_variants_?void 0:_product_variants_.title)||"unknown").indexOf("default")>=0)return;(0,preact_module.render)((0,
preact_module.h)(App,{product:product,optionsWithValues:optionsWithValues,selectedVariantId:selectedVariantId,settings:settings,selectCallback:selectCallback}),container,renderTarget)};const unload=function(container){
const renderTarget=container.querySelector(RENDER_TARGET_SELECTOR);if(!renderTarget){console.warn("Render target element not found");return}(0,preact_module.render)(null,container,renderTarget)};var format_money=__webpack_require__(65)
;var payload=__webpack_require__(438);var cart=__webpack_require__(570);var create_raw_item_payload=__webpack_require__(464);const ProductDetailsIO=(0,dist.type)({currencyCode:(0,dist.size)((0,dist.string)(),3,3),moneyFormat:(0,
dist.string)()});const soldOutMessage="Sold Out";const init=async function(){const cartMachine=(0,cart.getCartMachine)();const containers=jquery_min_default()(".js-product-details");containers.each((function(_,cElement){
const container=jquery_min_default()(cElement);const errorRenderTarget=container.find(".js-product-form-error");const rawIo=container.find('script[type="application/json"]').first().text()||"{}"
;const{currencyCode:currencyCode,moneyFormat:moneyFormat}=ProductDetailsIO.create(JSON.parse(rawIo));const selectCallback=function(param){let{product:{id:productId},selectedVariant:variant}=param;const formattedPrice=(0,
format_money.formatMoney)(variant.price,moneyFormat)
;const price=!variant.available?["<del>",formattedPrice,"</del>","<strong>",soldOutMessage,"</strong>"].join(" "):variant.compare_at_price&&variant.price<variant.compare_at_price?[formattedPrice,"<del>",(0,
format_money.formatMoney)(variant.compare_at_price,moneyFormat),"</del>"].join(" "):formattedPrice;container.find(".js-price-preview").html(price)
;container.find('form[action^="/cart/add"]').find('[type="submit"]').prop("disabled",!variant.available);container.find(".js-variant-selector-dummy").val(variant.id).trigger("change");errorRenderTarget.empty()
;sendProductVariantSelectedEvent({productId:productId,variantId:variant.id})};container.find('form[action^="/cart/add"]').on("submit",(async function(evt){evt.preventDefault();try{const form=jquery_min_default()(evt.delegateTarget)
;const ajaxCartData=form.attr("data-ajax-cart-disabled");const rawItemPayload=(0,create_raw_item_payload.createRawItemPayload)(form.serializeArray());const itemPayload=payload.SingleItemPayload.create(rawItemPayload)
;errorRenderTarget.empty();const itemsAddedToCart=await new Promise((function(resolve,reject){cartMachine.addItems({resolve:resolve,reject:reject,input:{items:[itemPayload]}})}));console.debug("Items added to cart",itemsAddedToCart)
;if("disabled"===ajaxCartData)window.location.replace("/cart");else(0,cart_drawer_open_request.sendCartDrawerOpenRequestEvent)();if(itemsAddedToCart&&window.fbq){var _items_;const{items:items}=itemsAddedToCart
;window.fbq("track","AddToCart",{content_ids:items.map((function(item){return item.id})),content_name:(null===(_items_=items[0])||void 0===_items_?void 0:_items_.title)||"Product",content_type:"product_group",
contents:items.map((function(param){let{id:id,quantity:quantity}=param;return{id:id,quantity:quantity}})),currency:currencyCode,num_items:items.length,value:items.reduce((function(acc,item){return acc+item.final_line_price}),0)/100})}
}catch(err){const msgSuffix="[a8bed63b434340e982acf019d921f602]";const errMessage=err instanceof Error?err.message:"string"===typeof err?err:"Unknown error";errorRenderTarget.text([errMessage,msgSuffix].join(" "))}}))
;const optionsContainer=container.find(".js-product-options");const optionsContainerElement=optionsContainer.get(0);if(!optionsContainerElement)return;load(optionsContainerElement,selectCallback)}))}
;const qty_controls_init=async function(){jquery_min_default()(".js-product-qty-controls").each((function(_,element){const controls=jquery_min_default()(element);const field=controls.find('input[name="quantity"]')
;const indicator=controls.find(".js-qty-indicator");const rawInitialQty=field.val();const initialQty="string"===typeof rawInitialQty?parseInt(rawInitialQty,10):"number"===typeof rawInitialQty?rawInitialQty:null
;if(null==initialQty)throw new Error("Quantity is not a number");indicator.text(initialQty);controls.find("button").on("click",(function(evt){const action=jquery_min_default()(evt.delegateTarget).attr("data-action")
;const rawCurrentQty=field.val();const currentQty="string"===typeof rawCurrentQty?parseInt(rawCurrentQty,10):"number"===typeof rawCurrentQty?rawCurrentQty:null;if(null==currentQty)throw new Error("Quantity is not a number")
;const updatedQty="plus"===action?currentQty+1:"minus"===action&&currentQty>1?currentQty-1:currentQty;field.val(updatedQty);indicator.text(updatedQty)}))}))};var swiper_esm=__webpack_require__(172);const image_gallery_init=async function(){
const sections=jquery_min_default()(".js-product-gallery");sections.each((function(_,sElement){const section=jquery_min_default()(sElement);const imageCarousel=section.find(".js-product-gallery-images")
;const imageSwiperContainerElement=imageCarousel.find(".swiper-container-images").first().get(0);const thumbSwiperContainerElement=imageCarousel.find(".swiper-container-thumbs").first().get(0)
;if(!imageSwiperContainerElement||!thumbSwiperContainerElement)return;const thumbSwiper=new swiper_esm["default"](thumbSwiperContainerElement,{autoHeight:true,direction:"horizontal",spaceBetween:10,slidesPerView:4,freeMode:true,
watchSlidesProgress:true,centerInsufficientSlides:false,init:false,modules:[swiper_esm.FreeMode]});const imageSwiper=new swiper_esm["default"](imageSwiperContainerElement,{autoHeight:true,direction:"horizontal",loop:true,
centerInsufficientSlides:false,centeredSlides:true,init:false,slidesPerView:1,modules:[swiper_esm.Navigation,swiper_esm.Thumbs],thumbs:{swiper:thumbSwiper}});thumbSwiper.init();imageSwiper.init()
;const updateVariantImage=function(productId,variantId){
const slideIndex=parseInt(jquery_min_default()(`.js-product-gallery-images[data-product-id="${productId}"]`).first().find(".swiper-container-images.swiper-initialized").find(".js-product-gallery-image").filter(`[data-image-variants~="${variantId}"]`).closest(".swiper-slide").not(".swiper-slide-duplicate").first().attr("data-swiper-slide-index")||"",10)
;if(Number.isNaN(slideIndex))return;imageSwiper.slideToLoop(slideIndex)};jquery_min_default()(document).on(productVariantSelectedEventType,(function(param){let{originalEvent:evt}=param;if(!ProductVariantSelectedEvent.is(evt))return
;const{detail:{productId:productId,variantId:variantId}}=evt;updateVariantImage(productId,variantId)}))}))};var photoswipe=__webpack_require__(857);var photoswipe_default=__webpack_require__.n(photoswipe)
;var photoswipe_ui_default=__webpack_require__(623);var photoswipe_ui_default_default=__webpack_require__.n(photoswipe_ui_default);const options={index:0,history:true,galleryUID:1911,fullscreenEl:false,shareEl:false,tapToClose:true,
tapToToggleControls:false};const image_lightbox_init=async function(){const pswpElement=jquery_min_default()("#js-pswp").get(0);jquery_min_default()(".js-lightbox-trigger").on("click",(function(evt){evt.preventDefault()
;const imageSizes=jquery_min_default()(evt.delegateTarget).attr("href")||"";if(!imageSizes)return;const gallery=new(photoswipe_default())(pswpElement,photoswipe_ui_default_default(),[{
html:['<div class="Product-lightboxImage lazyload"',`  data-bgset='${imageSizes}' data-sizes='auto'>`,"</div>"].join("")}],options);gallery.init()}))};const description_tabs_init=async function(){
const tabControls=jquery_min_default()(".js-product-tab-control");const tabPanels=jquery_min_default()(".js-product-tab-panel");if(!tabPanels)return;tabControls.on("click",(function makeTabActive(evt){
const tabControl=jquery_min_default()(evt.delegateTarget);const tabFilter=['[data-tab-index="',tabControl.attr("data-tab-index")||0,'"]'].join("");tabControls.not(tabFilter).removeClass("is-active");tabControl.addClass("is-active")
;tabPanels.not(tabFilter).removeClass("is-active");tabPanels.filter(tabFilter).addClass("is-active")}))};const logErrors=function(err){console.error(err)};init().catch(logErrors);qty_controls_init().catch(logErrors)
;image_gallery_init().catch(logErrors);image_lightbox_init().catch(logErrors);description_tabs_init().catch(logErrors)},623:function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_RESULT__;
/*! PhotoSwipe Default UI - 4.1.3 - 2019-01-08
* http://photoswipe.com
* Copyright (c) 2019 Dmitry Semenov; */(function(root,factory){if(true)!(__WEBPACK_AMD_DEFINE_FACTORY__=factory,
__WEBPACK_AMD_DEFINE_RESULT__="function"===typeof __WEBPACK_AMD_DEFINE_FACTORY__?__WEBPACK_AMD_DEFINE_FACTORY__.call(exports,__webpack_require__,exports,module):__WEBPACK_AMD_DEFINE_FACTORY__,
void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))})(this,(function(){"use strict";var PhotoSwipeUI_Default=function(pswp,framework){var ui=this
;var _overlayUIUpdated=false,_controlsVisible=true,_fullscrenAPI,_controls,_captionContainer,_fakeCaptionContainer,_indexIndicator,_shareButton,_shareModal,_shareModalHidden=true,_initalCloseOnScrollValue,_isIdle,_listen,_loadingIndicator,_loadingIndicatorHidden,_loadingIndicatorTimeout,_galleryHasOneSlide,_options,_defaultUIOptions={
barsSize:{top:44,bottom:"auto"},closeElClasses:["item","caption","zoom-wrap","ui","top-bar"],timeToIdle:4e3,timeToIdleOutside:1e3,loadingIndicatorDelay:1e3,addCaptionHTMLFn:function(item,captionEl){if(!item.title){
captionEl.children[0].innerHTML="";return false}captionEl.children[0].innerHTML=item.title;return true},closeEl:true,captionEl:true,fullscreenEl:true,zoomEl:true,shareEl:true,counterEl:true,arrowEl:true,preloaderEl:true,tapToClose:false,
tapToToggleControls:true,clickToCloseNonZoomable:true,shareButtons:[{id:"facebook",label:"Share on Facebook",url:"https://www.facebook.com/sharer/sharer.php?u={{url}}"},{id:"twitter",label:"Tweet",
url:"https://twitter.com/intent/tweet?text={{text}}&url={{url}}"},{id:"pinterest",label:"Pin it",url:"http://www.pinterest.com/pin/create/button/"+"?url={{url}}&media={{image_url}}&description={{text}}"},{id:"download",
label:"Download image",url:"{{raw_image_url}}",download:true}],getImageURLForShare:function(){return pswp.currItem.src||""},getPageURLForShare:function(){return window.location.href},getTextForShare:function(){return pswp.currItem.title||""
},indexIndicatorSep:" / ",fitControlsWidth:1200},_blockControlsTap,_blockControlsTapTimeout;var _onControlsTap=function(e){if(_blockControlsTap)return true;e=e||window.event
;if(_options.timeToIdle&&_options.mouseUsed&&!_isIdle)_onIdleMouseMove();var target=e.target||e.srcElement,uiElement,clickedClass=target.getAttribute("class")||"",found;for(var i=0;i<_uiElements.length;i++){uiElement=_uiElements[i]
;if(uiElement.onTap&&clickedClass.indexOf("pswp__"+uiElement.name)>-1){uiElement.onTap();found=true}}if(found){if(e.stopPropagation)e.stopPropagation();_blockControlsTap=true;var tapDelay=framework.features.isOldAndroid?600:30
;_blockControlsTapTimeout=setTimeout((function(){_blockControlsTap=false}),tapDelay)}},_fitControlsInViewport=function(){return!pswp.likelyTouchDevice||_options.mouseUsed||screen.width>_options.fitControlsWidth
},_togglePswpClass=function(el,cName,add){framework[(add?"add":"remove")+"Class"](el,"pswp__"+cName)},_countNumItems=function(){var hasOneSlide=1===_options.getNumItemsFn();if(hasOneSlide!==_galleryHasOneSlide){
_togglePswpClass(_controls,"ui--one-slide",hasOneSlide);_galleryHasOneSlide=hasOneSlide}},_toggleShareModalClass=function(){_togglePswpClass(_shareModal,"share-modal--hidden",_shareModalHidden)},_toggleShareModal=function(){
_shareModalHidden=!_shareModalHidden;if(!_shareModalHidden){_toggleShareModalClass();setTimeout((function(){if(!_shareModalHidden)framework.addClass(_shareModal,"pswp__share-modal--fade-in")}),30)}else{
framework.removeClass(_shareModal,"pswp__share-modal--fade-in");setTimeout((function(){if(_shareModalHidden)_toggleShareModalClass()}),300)}if(!_shareModalHidden)_updateShareURLs();return false},_openWindowPopup=function(e){
e=e||window.event;var target=e.target||e.srcElement;pswp.shout("shareLinkClick",e,target);if(!target.href)return false;if(target.hasAttribute("download"))return true
;window.open(target.href,"pswp_share","scrollbars=yes,resizable=yes,toolbar=no,"+"location=yes,width=550,height=420,top=100,left="+(window.screen?Math.round(screen.width/2-275):100));if(!_shareModalHidden)_toggleShareModal();return false
},_updateShareURLs=function(){var shareButtonOut="",shareButtonData,shareURL,image_url,page_url,share_text;for(var i=0;i<_options.shareButtons.length;i++){shareButtonData=_options.shareButtons[i]
;image_url=_options.getImageURLForShare(shareButtonData);page_url=_options.getPageURLForShare(shareButtonData);share_text=_options.getTextForShare(shareButtonData)
;shareURL=shareButtonData.url.replace("{{url}}",encodeURIComponent(page_url)).replace("{{image_url}}",encodeURIComponent(image_url)).replace("{{raw_image_url}}",image_url).replace("{{text}}",encodeURIComponent(share_text))
;shareButtonOut+='<a href="'+shareURL+'" target="_blank" '+'class="pswp__share--'+shareButtonData.id+'"'+(shareButtonData.download?"download":"")+">"+shareButtonData.label+"</a>"
;if(_options.parseShareButtonOut)shareButtonOut=_options.parseShareButtonOut(shareButtonData,shareButtonOut)}_shareModal.children[0].innerHTML=shareButtonOut;_shareModal.children[0].onclick=_openWindowPopup},_hasCloseClass=function(target){
for(var i=0;i<_options.closeElClasses.length;i++)if(framework.hasClass(target,"pswp__"+_options.closeElClasses[i]))return true},_idleInterval,_idleTimer,_idleIncrement=0,_onIdleMouseMove=function(){clearTimeout(_idleTimer);_idleIncrement=0
;if(_isIdle)ui.setIdle(false)},_onMouseLeaveWindow=function(e){e=e?e:window.event;var from=e.relatedTarget||e.toElement;if(!from||"HTML"===from.nodeName){clearTimeout(_idleTimer);_idleTimer=setTimeout((function(){ui.setIdle(true)
}),_options.timeToIdleOutside)}},_setupFullscreenAPI=function(){if(_options.fullscreenEl&&!framework.features.isOldAndroid){if(!_fullscrenAPI)_fullscrenAPI=ui.getFullscreenAPI();if(_fullscrenAPI){
framework.bind(document,_fullscrenAPI.eventK,ui.updateFullscreen);ui.updateFullscreen();framework.addClass(pswp.template,"pswp--supports-fs")}else framework.removeClass(pswp.template,"pswp--supports-fs")}},_setupLoadingIndicator=function(){
if(_options.preloaderEl){_toggleLoadingIndicator(true);_listen("beforeChange",(function(){clearTimeout(_loadingIndicatorTimeout);_loadingIndicatorTimeout=setTimeout((function(){if(pswp.currItem&&pswp.currItem.loading){
if(!pswp.allowProgressiveImg()||pswp.currItem.img&&!pswp.currItem.img.naturalWidth)_toggleLoadingIndicator(false)}else _toggleLoadingIndicator(true)}),_options.loadingIndicatorDelay)}));_listen("imageLoadComplete",(function(index,item){
if(pswp.currItem===item)_toggleLoadingIndicator(true)}))}},_toggleLoadingIndicator=function(hide){if(_loadingIndicatorHidden!==hide){_togglePswpClass(_loadingIndicator,"preloader--active",!hide);_loadingIndicatorHidden=hide}
},_applyNavBarGaps=function(item){var gap=item.vGap;if(_fitControlsInViewport()){var bars=_options.barsSize;if(_options.captionEl&&"auto"===bars.bottom){if(!_fakeCaptionContainer){
_fakeCaptionContainer=framework.createEl("pswp__caption pswp__caption--fake");_fakeCaptionContainer.appendChild(framework.createEl("pswp__caption__center"));_controls.insertBefore(_fakeCaptionContainer,_captionContainer)
;framework.addClass(_controls,"pswp__ui--fit")}if(_options.addCaptionHTMLFn(item,_fakeCaptionContainer,true)){var captionSize=_fakeCaptionContainer.clientHeight;gap.bottom=parseInt(captionSize,10)||44}else gap.bottom=bars.top
}else gap.bottom="auto"===bars.bottom?0:bars.bottom;gap.top=bars.top}else gap.top=gap.bottom=0},_setupIdle=function(){if(_options.timeToIdle)_listen("mouseUsed",(function(){framework.bind(document,"mousemove",_onIdleMouseMove)
;framework.bind(document,"mouseout",_onMouseLeaveWindow);_idleInterval=setInterval((function(){_idleIncrement++;if(2===_idleIncrement)ui.setIdle(true)}),_options.timeToIdle/2)}))},_setupHidingControlsDuringGestures=function(){
_listen("onVerticalDrag",(function(now){if(_controlsVisible&&now<.95)ui.hideControls();else if(!_controlsVisible&&now>=.95)ui.showControls()}));var pinchControlsHidden;_listen("onPinchClose",(function(now){if(_controlsVisible&&now<.9){
ui.hideControls();pinchControlsHidden=true}else if(pinchControlsHidden&&!_controlsVisible&&now>.9)ui.showControls()}));_listen("zoomGestureEnded",(function(){pinchControlsHidden=false
;if(pinchControlsHidden&&!_controlsVisible)ui.showControls()}))};var _uiElements=[{name:"caption",option:"captionEl",onInit:function(el){_captionContainer=el}},{name:"share-modal",option:"shareEl",onInit:function(el){_shareModal=el},
onTap:function(){_toggleShareModal()}},{name:"button--share",option:"shareEl",onInit:function(el){_shareButton=el},onTap:function(){_toggleShareModal()}},{name:"button--zoom",option:"zoomEl",onTap:pswp.toggleDesktopZoom},{name:"counter",
option:"counterEl",onInit:function(el){_indexIndicator=el}},{name:"button--close",option:"closeEl",onTap:pswp.close},{name:"button--arrow--left",option:"arrowEl",onTap:pswp.prev},{name:"button--arrow--right",option:"arrowEl",onTap:pswp.next
},{name:"button--fs",option:"fullscreenEl",onTap:function(){if(_fullscrenAPI.isFullscreen())_fullscrenAPI.exit();else _fullscrenAPI.enter()}},{name:"preloader",option:"preloaderEl",onInit:function(el){_loadingIndicator=el}}]
;var _setupUIElements=function(){var item,classAttr,uiElement;var loopThroughChildElements=function(sChildren){if(!sChildren)return;var l=sChildren.length;for(var i=0;i<l;i++){item=sChildren[i];classAttr=item.className
;for(var a=0;a<_uiElements.length;a++){uiElement=_uiElements[a];if(classAttr.indexOf("pswp__"+uiElement.name)>-1)if(_options[uiElement.option]){framework.removeClass(item,"pswp__element--disabled");if(uiElement.onInit)uiElement.onInit(item)
}else framework.addClass(item,"pswp__element--disabled")}}};loopThroughChildElements(_controls.children);var topBar=framework.getChildByClass(_controls,"pswp__top-bar");if(topBar)loopThroughChildElements(topBar.children)}
;ui.init=function(){framework.extend(pswp.options,_defaultUIOptions,true);_options=pswp.options;_controls=framework.getChildByClass(pswp.scrollWrap,"pswp__ui");_listen=pswp.listen;_setupHidingControlsDuringGestures()
;_listen("beforeChange",ui.update);_listen("doubleTap",(function(point){var initialZoomLevel=pswp.currItem.initialZoomLevel
;if(pswp.getZoomLevel()!==initialZoomLevel)pswp.zoomTo(initialZoomLevel,point,333);else pswp.zoomTo(_options.getDoubleTapZoom(false,pswp.currItem),point,333)}));_listen("preventDragEvent",(function(e,isDown,preventObj){
var t=e.target||e.srcElement;if(t&&t.getAttribute("class")&&e.type.indexOf("mouse")>-1&&(t.getAttribute("class").indexOf("__caption")>0||/(SMALL|STRONG|EM)/i.test(t.tagName)))preventObj.prevent=false}));_listen("bindEvents",(function(){
framework.bind(_controls,"pswpTap click",_onControlsTap);framework.bind(pswp.scrollWrap,"pswpTap",ui.onGlobalTap);if(!pswp.likelyTouchDevice)framework.bind(pswp.scrollWrap,"mouseover",ui.onMouseOver)}));_listen("unbindEvents",(function(){
if(!_shareModalHidden)_toggleShareModal();if(_idleInterval)clearInterval(_idleInterval);framework.unbind(document,"mouseout",_onMouseLeaveWindow);framework.unbind(document,"mousemove",_onIdleMouseMove)
;framework.unbind(_controls,"pswpTap click",_onControlsTap);framework.unbind(pswp.scrollWrap,"pswpTap",ui.onGlobalTap);framework.unbind(pswp.scrollWrap,"mouseover",ui.onMouseOver);if(_fullscrenAPI){
framework.unbind(document,_fullscrenAPI.eventK,ui.updateFullscreen);if(_fullscrenAPI.isFullscreen()){_options.hideAnimationDuration=0;_fullscrenAPI.exit()}_fullscrenAPI=null}}));_listen("destroy",(function(){if(_options.captionEl){
if(_fakeCaptionContainer)_controls.removeChild(_fakeCaptionContainer);framework.removeClass(_captionContainer,"pswp__caption--empty")}if(_shareModal)_shareModal.children[0].onclick=null
;framework.removeClass(_controls,"pswp__ui--over-close");framework.addClass(_controls,"pswp__ui--hidden");ui.setIdle(false)}));if(!_options.showAnimationDuration)framework.removeClass(_controls,"pswp__ui--hidden")
;_listen("initialZoomIn",(function(){if(_options.showAnimationDuration)framework.removeClass(_controls,"pswp__ui--hidden")}));_listen("initialZoomOut",(function(){framework.addClass(_controls,"pswp__ui--hidden")}))
;_listen("parseVerticalMargin",_applyNavBarGaps);_setupUIElements();if(_options.shareEl&&_shareButton&&_shareModal)_shareModalHidden=true;_countNumItems();_setupIdle();_setupFullscreenAPI();_setupLoadingIndicator()}
;ui.setIdle=function(isIdle){_isIdle=isIdle;_togglePswpClass(_controls,"ui--idle",isIdle)};ui.update=function(){if(_controlsVisible&&pswp.currItem){ui.updateIndexIndicator();if(_options.captionEl){
_options.addCaptionHTMLFn(pswp.currItem,_captionContainer);_togglePswpClass(_captionContainer,"caption--empty",!pswp.currItem.title)}_overlayUIUpdated=true}else _overlayUIUpdated=false;if(!_shareModalHidden)_toggleShareModal()
;_countNumItems()};ui.updateFullscreen=function(e){if(e)setTimeout((function(){pswp.setScrollOffset(0,framework.getScrollY())}),50);framework[(_fullscrenAPI.isFullscreen()?"add":"remove")+"Class"](pswp.template,"pswp--fs")}
;ui.updateIndexIndicator=function(){if(_options.counterEl)_indexIndicator.innerHTML=pswp.getCurrentIndex()+1+_options.indexIndicatorSep+_options.getNumItemsFn()};ui.onGlobalTap=function(e){e=e||window.event;var target=e.target||e.srcElement
;if(_blockControlsTap)return;if(e.detail&&"mouse"===e.detail.pointerType){if(_hasCloseClass(target)){pswp.close();return}if(framework.hasClass(target,"pswp__img"))if(1===pswp.getZoomLevel()&&pswp.getZoomLevel()<=pswp.currItem.fitRatio){
if(_options.clickToCloseNonZoomable)pswp.close()}else pswp.toggleDesktopZoom(e.detail.releasePoint)}else{if(_options.tapToToggleControls)if(_controlsVisible)ui.hideControls();else ui.showControls()
;if(_options.tapToClose&&(framework.hasClass(target,"pswp__img")||_hasCloseClass(target))){pswp.close();return}}};ui.onMouseOver=function(e){e=e||window.event;var target=e.target||e.srcElement
;_togglePswpClass(_controls,"ui--over-close",_hasCloseClass(target))};ui.hideControls=function(){framework.addClass(_controls,"pswp__ui--hidden");_controlsVisible=false};ui.showControls=function(){_controlsVisible=true
;if(!_overlayUIUpdated)ui.update();framework.removeClass(_controls,"pswp__ui--hidden")};ui.supportsFullscreen=function(){var d=document;return!!(d.exitFullscreen||d.mozCancelFullScreen||d.webkitExitFullscreen||d.msExitFullscreen)}
;ui.getFullscreenAPI=function(){var dE=document.documentElement,api,tF="fullscreenchange";if(dE.requestFullscreen)api={enterK:"requestFullscreen",exitK:"exitFullscreen",elementK:"fullscreenElement",eventK:tF
};else if(dE.mozRequestFullScreen)api={enterK:"mozRequestFullScreen",exitK:"mozCancelFullScreen",elementK:"mozFullScreenElement",eventK:"moz"+tF};else if(dE.webkitRequestFullscreen)api={enterK:"webkitRequestFullscreen",
exitK:"webkitExitFullscreen",elementK:"webkitFullscreenElement",eventK:"webkit"+tF};else if(dE.msRequestFullscreen)api={enterK:"msRequestFullscreen",exitK:"msExitFullscreen",elementK:"msFullscreenElement",eventK:"MSFullscreenChange"}
;if(api){api.enter=function(){_initalCloseOnScrollValue=_options.closeOnScroll;_options.closeOnScroll=false
;if("webkitRequestFullscreen"===this.enterK)pswp.template[this.enterK](Element.ALLOW_KEYBOARD_INPUT);else return pswp.template[this.enterK]()};api.exit=function(){_options.closeOnScroll=_initalCloseOnScrollValue
;return document[this.exitK]()};api.isFullscreen=function(){return document[this.elementK]}}return api}};return PhotoSwipeUI_Default}))},857:function(module,exports,__webpack_require__){
var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_RESULT__;
/*! PhotoSwipe - v4.1.3 - 2019-01-08
* http://photoswipe.com
* Copyright (c) 2019 Dmitry Semenov; */(function(root,factory){if(true)!(__WEBPACK_AMD_DEFINE_FACTORY__=factory,
__WEBPACK_AMD_DEFINE_RESULT__="function"===typeof __WEBPACK_AMD_DEFINE_FACTORY__?__WEBPACK_AMD_DEFINE_FACTORY__.call(exports,__webpack_require__,exports,module):__WEBPACK_AMD_DEFINE_FACTORY__,
void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))})(this,(function(){"use strict";var PhotoSwipe=function(template,UiClass,items,options){var framework={features:null,
bind:function(target,type,listener,unbind){var methodName=(unbind?"remove":"add")+"EventListener";type=type.split(" ");for(var i=0;i<type.length;i++)if(type[i])target[methodName](type[i],listener,false)},isArray:function(obj){
return obj instanceof Array},createEl:function(classes,tag){var el=document.createElement(tag||"div");if(classes)el.className=classes;return el},getScrollY:function(){var yOffset=window.pageYOffset
;return void 0!==yOffset?yOffset:document.documentElement.scrollTop},unbind:function(target,type,listener){framework.bind(target,type,listener,true)},removeClass:function(el,className){var reg=new RegExp("(\\s|^)"+className+"(\\s|$)")
;el.className=el.className.replace(reg," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")},addClass:function(el,className){if(!framework.hasClass(el,className))el.className+=(el.className?" ":"")+className},hasClass:function(el,className){
return el.className&&new RegExp("(^|\\s)"+className+"(\\s|$)").test(el.className)},getChildByClass:function(parentEl,childClassName){var node=parentEl.firstChild;while(node){if(framework.hasClass(node,childClassName))return node
;node=node.nextSibling}},arraySearch:function(array,value,key){var i=array.length;while(i--)if(array[i][key]===value)return i;return-1},extend:function(o1,o2,preventOverwrite){for(var prop in o2)if(o2.hasOwnProperty(prop)){
if(preventOverwrite&&o1.hasOwnProperty(prop))continue;o1[prop]=o2[prop]}},easing:{sine:{out:function(k){return Math.sin(k*(Math.PI/2))},inOut:function(k){return-(Math.cos(Math.PI*k)-1)/2}},cubic:{out:function(k){return--k*k*k+1}}},
detectFeatures:function(){if(framework.features)return framework.features;var helperEl=framework.createEl(),helperStyle=helperEl.style,vendor="",features={};features.oldIE=document.all&&!document.addEventListener
;features.touch="ontouchstart"in window;if(window.requestAnimationFrame){features.raf=window.requestAnimationFrame;features.caf=window.cancelAnimationFrame}features.pointerEvent=!!window.PointerEvent||navigator.msPointerEnabled
;if(!features.pointerEvent){var ua=navigator.userAgent;if(/iP(hone|od)/.test(navigator.platform)){var v=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);if(v&&v.length>0){v=parseInt(v[1],10);if(v>=1&&v<8)features.isOldIOSPhone=true}}
var match=ua.match(/Android\s([0-9\.]*)/);var androidversion=match?match[1]:0;androidversion=parseFloat(androidversion);if(androidversion>=1){if(androidversion<4.4)features.isOldAndroid=true;features.androidVersion=androidversion}
features.isMobileOpera=/opera mini|opera mobi/i.test(ua)}var styleChecks=["transform","perspective","animationName"],vendors=["","webkit","Moz","ms","O"],styleCheckItem,styleName;for(var i=0;i<4;i++){vendor=vendors[i];for(var a=0;a<3;a++){
styleCheckItem=styleChecks[a];styleName=vendor+(vendor?styleCheckItem.charAt(0).toUpperCase()+styleCheckItem.slice(1):styleCheckItem);if(!features[styleCheckItem]&&styleName in helperStyle)features[styleCheckItem]=styleName}
if(vendor&&!features.raf){vendor=vendor.toLowerCase();features.raf=window[vendor+"RequestAnimationFrame"];if(features.raf)features.caf=window[vendor+"CancelAnimationFrame"]||window[vendor+"CancelRequestAnimationFrame"]}}if(!features.raf){
var lastTime=0;features.raf=function(fn){var currTime=(new Date).getTime();var timeToCall=Math.max(0,16-(currTime-lastTime));var id=window.setTimeout((function(){fn(currTime+timeToCall)}),timeToCall);lastTime=currTime+timeToCall;return id}
;features.caf=function(id){clearTimeout(id)}}features.svg=!!document.createElementNS&&!!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect;framework.features=features;return features}};framework.detectFeatures()
;if(framework.features.oldIE)framework.bind=function(target,type,listener,unbind){type=type.split(" ");var methodName=(unbind?"detach":"attach")+"Event",evName,_handleEv=function(){listener.handleEvent.call(listener)}
;for(var i=0;i<type.length;i++){evName=type[i];if(evName)if("object"===typeof listener&&listener.handleEvent){if(!unbind)listener["oldIE"+evName]=_handleEv;else if(!listener["oldIE"+evName])return false
;target[methodName]("on"+evName,listener["oldIE"+evName])}else target[methodName]("on"+evName,listener)}};var self=this;var DOUBLE_TAP_RADIUS=25,NUM_HOLDERS=3;var _options={allowPanToNext:true,spacing:.12,bgOpacity:1,mouseUsed:false,
loop:true,pinchToClose:true,closeOnScroll:true,closeOnVerticalDrag:true,verticalDragRange:.75,hideAnimationDuration:333,showAnimationDuration:333,showHideOpacity:false,focus:true,escKey:true,arrowKeys:true,mainScrollEndFriction:.35,
panEndFriction:.35,isClickableElement:function(el){return"A"===el.tagName},getDoubleTapZoom:function(isMouseClick,item){if(isMouseClick)return 1;else return item.initialZoomLevel<.7?1:1.33},maxSpreadZoom:1.33,modal:true,scaleMode:"fit"}
;framework.extend(_options,options);var _getEmptyPoint=function(){return{x:0,y:0}}
;var _isOpen,_isDestroying,_closedByScroll,_currentItemIndex,_containerStyle,_containerShiftIndex,_currPanDist=_getEmptyPoint(),_startPanOffset=_getEmptyPoint(),_panOffset=_getEmptyPoint(),_upMoveEvents,_downEvents,_globalEventHandlers,_viewportSize={},_currZoomLevel,_startZoomLevel,_translatePrefix,_translateSufix,_updateSizeInterval,_itemsNeedUpdate,_currPositionIndex=0,_offset={},_slideSize=_getEmptyPoint(),_itemHolders,_prevItemIndex,_indexDiff=0,_dragStartEvent,_dragMoveEvent,_dragEndEvent,_dragCancelEvent,_transformKey,_pointerEventEnabled,_isFixedPosition=true,_likelyTouchDevice,_modules=[],_requestAF,_cancelAF,_initalClassName,_initalWindowScrollY,_oldIE,_currentWindowScrollY,_features,_windowVisibleSize={},_renderMaxResolution=false,_orientationChangeTimeout,_registerModule=function(name,module1){
framework.extend(self,module1.publicMethods);_modules.push(name)},_getLoopedId=function(index){var numSlides=_getNumItems();if(index>numSlides-1)return index-numSlides;else if(index<0)return numSlides+index;return index
},_listeners={},_listen=function(name,fn){if(!_listeners[name])_listeners[name]=[];return _listeners[name].push(fn)},_shout=function(name){var listeners=_listeners[name];if(listeners){var args=Array.prototype.slice.call(arguments)
;args.shift();for(var i=0;i<listeners.length;i++)listeners[i].apply(self,args)}},_getCurrentTime=function(){return(new Date).getTime()},_applyBgOpacity=function(opacity){_bgOpacity=opacity;self.bg.style.opacity=opacity*_options.bgOpacity
},_applyZoomTransform=function(styleObj,x,y,zoom,item){if(!_renderMaxResolution||item&&item!==self.currItem)zoom/=item?item.fitRatio:self.currItem.fitRatio
;styleObj[_transformKey]=_translatePrefix+x+"px, "+y+"px"+_translateSufix+" scale("+zoom+")"},_applyCurrentZoomPan=function(allowRenderResolution){if(_currZoomElementStyle){if(allowRenderResolution)if(_currZoomLevel>self.currItem.fitRatio){
if(!_renderMaxResolution){_setImageSize(self.currItem,false,true);_renderMaxResolution=true}}else if(_renderMaxResolution){_setImageSize(self.currItem);_renderMaxResolution=false}
_applyZoomTransform(_currZoomElementStyle,_panOffset.x,_panOffset.y,_currZoomLevel)}},_applyZoomPanToItem=function(item){
if(item.container)_applyZoomTransform(item.container.style,item.initialPosition.x,item.initialPosition.y,item.initialZoomLevel,item)},_setTranslateX=function(x,elStyle){elStyle[_transformKey]=_translatePrefix+x+"px, 0px"+_translateSufix
},_moveMainScroll=function(x,dragging){if(!_options.loop&&dragging){var newSlideIndexOffset=_currentItemIndex+(_slideSize.x*_currPositionIndex-x)/_slideSize.x,delta=Math.round(x-_mainScrollPos.x)
;if(newSlideIndexOffset<0&&delta>0||newSlideIndexOffset>=_getNumItems()-1&&delta<0)x=_mainScrollPos.x+delta*_options.mainScrollEndFriction}_mainScrollPos.x=x;_setTranslateX(x,_containerStyle)},_calculatePanOffset=function(axis,zoomLevel){
var m=_midZoomPoint[axis]-_offset[axis];return _startPanOffset[axis]+_currPanDist[axis]+m-m*(zoomLevel/_startZoomLevel)},_equalizePoints=function(p1,p2){p1.x=p2.x;p1.y=p2.y;if(p2.id)p1.id=p2.id},_roundPoint=function(p){p.x=Math.round(p.x)
;p.y=Math.round(p.y)},_mouseMoveTimeout=null,_onFirstMouseMove=function(){if(_mouseMoveTimeout){framework.unbind(document,"mousemove",_onFirstMouseMove);framework.addClass(template,"pswp--has_mouse");_options.mouseUsed=true
;_shout("mouseUsed")}_mouseMoveTimeout=setTimeout((function(){_mouseMoveTimeout=null}),100)},_bindEvents=function(){framework.bind(document,"keydown",self);if(_features.transform)framework.bind(self.scrollWrap,"click",self)
;if(!_options.mouseUsed)framework.bind(document,"mousemove",_onFirstMouseMove);framework.bind(window,"resize scroll orientationchange",self);_shout("bindEvents")},_unbindEvents=function(){
framework.unbind(window,"resize scroll orientationchange",self);framework.unbind(window,"scroll",_globalEventHandlers.scroll);framework.unbind(document,"keydown",self);framework.unbind(document,"mousemove",_onFirstMouseMove)
;if(_features.transform)framework.unbind(self.scrollWrap,"click",self);if(_isDragging)framework.unbind(window,_upMoveEvents,self);clearTimeout(_orientationChangeTimeout);_shout("unbindEvents")
},_calculatePanBounds=function(zoomLevel,update){var bounds=_calculateItemSize(self.currItem,_viewportSize,zoomLevel);if(update)_currPanBounds=bounds;return bounds},_getMinZoomLevel=function(item){if(!item)item=self.currItem
;return item.initialZoomLevel},_getMaxZoomLevel=function(item){if(!item)item=self.currItem;return item.w>0?_options.maxSpreadZoom:1},_modifyDestPanOffset=function(axis,destPanBounds,destPanOffset,destZoomLevel){
if(destZoomLevel===self.currItem.initialZoomLevel){destPanOffset[axis]=self.currItem.initialPosition[axis];return true}else{destPanOffset[axis]=_calculatePanOffset(axis,destZoomLevel);if(destPanOffset[axis]>destPanBounds.min[axis]){
destPanOffset[axis]=destPanBounds.min[axis];return true}else if(destPanOffset[axis]<destPanBounds.max[axis]){destPanOffset[axis]=destPanBounds.max[axis];return true}}return false},_setupTransforms=function(){if(_transformKey){
var allow3dTransform=_features.perspective&&!_likelyTouchDevice;_translatePrefix="translate"+(allow3dTransform?"3d(":"(");_translateSufix=_features.perspective?", 0px)":")";return}_transformKey="left";framework.addClass(template,"pswp--ie")
;_setTranslateX=function(x,elStyle){elStyle.left=x+"px"};_applyZoomPanToItem=function(item){var zoomRatio=item.fitRatio>1?1:item.fitRatio,s=item.container.style,w=zoomRatio*item.w,h=zoomRatio*item.h;s.width=w+"px";s.height=h+"px"
;s.left=item.initialPosition.x+"px";s.top=item.initialPosition.y+"px"};_applyCurrentZoomPan=function(){if(_currZoomElementStyle){
var s=_currZoomElementStyle,item=self.currItem,zoomRatio=item.fitRatio>1?1:item.fitRatio,w=zoomRatio*item.w,h=zoomRatio*item.h;s.width=w+"px";s.height=h+"px";s.left=_panOffset.x+"px";s.top=_panOffset.y+"px"}}},_onKeyDown=function(e){
var keydownAction="";if(_options.escKey&&27===e.keyCode)keydownAction="close";else if(_options.arrowKeys)if(37===e.keyCode)keydownAction="prev";else if(39===e.keyCode)keydownAction="next"
;if(keydownAction)if(!e.ctrlKey&&!e.altKey&&!e.shiftKey&&!e.metaKey){if(e.preventDefault)e.preventDefault();else e.returnValue=false;self[keydownAction]()}},_onGlobalClick=function(e){if(!e)return
;if(_moved||_zoomStarted||_mainScrollAnimating||_verticalDragInitiated){e.preventDefault();e.stopPropagation()}},_updatePageScrollOffset=function(){self.setScrollOffset(0,framework.getScrollY())}
;var _animations={},_numAnimations=0,_stopAnimation=function(name){if(_animations[name]){if(_animations[name].raf)_cancelAF(_animations[name].raf);_numAnimations--;delete _animations[name]}},_registerStartAnimation=function(name){
if(_animations[name])_stopAnimation(name);if(!_animations[name]){_numAnimations++;_animations[name]={}}},_stopAllAnimations=function(){for(var prop in _animations)if(_animations.hasOwnProperty(prop))_stopAnimation(prop)
},_animateProp=function(name,b,endProp,d,easingFn,onUpdate,onComplete){var startAnimTime=_getCurrentTime(),t;_registerStartAnimation(name);var animloop=function(){if(_animations[name]){t=_getCurrentTime()-startAnimTime;if(t>=d){
_stopAnimation(name);onUpdate(endProp);if(onComplete)onComplete();return}onUpdate((endProp-b)*easingFn(t/d)+b);_animations[name].raf=_requestAF(animloop)}};animloop()};var publicMethods={shout:_shout,listen:_listen,
viewportSize:_viewportSize,options:_options,isMainScrollAnimating:function(){return _mainScrollAnimating},getZoomLevel:function(){return _currZoomLevel},getCurrentIndex:function(){return _currentItemIndex},isDragging:function(){
return _isDragging},isZooming:function(){return _isZooming},setScrollOffset:function(x,y){_offset.x=x;_currentWindowScrollY=_offset.y=y;_shout("updateScrollOffset",_offset)},applyZoomPan:function(zoomLevel,panX,panY,allowRenderResolution){
_panOffset.x=panX;_panOffset.y=panY;_currZoomLevel=zoomLevel;_applyCurrentZoomPan(allowRenderResolution)},init:function(){if(_isOpen||_isDestroying)return;var i;self.framework=framework;self.template=template
;self.bg=framework.getChildByClass(template,"pswp__bg");_initalClassName=template.className;_isOpen=true;_features=framework.detectFeatures();_requestAF=_features.raf;_cancelAF=_features.caf;_transformKey=_features.transform
;_oldIE=_features.oldIE;self.scrollWrap=framework.getChildByClass(template,"pswp__scroll-wrap");self.container=framework.getChildByClass(self.scrollWrap,"pswp__container");_containerStyle=self.container.style
;self.itemHolders=_itemHolders=[{el:self.container.children[0],wrap:0,index:-1},{el:self.container.children[1],wrap:0,index:-1},{el:self.container.children[2],wrap:0,index:-1}]
;_itemHolders[0].el.style.display=_itemHolders[2].el.style.display="none";_setupTransforms();_globalEventHandlers={resize:self.updateSize,orientationchange:function(){clearTimeout(_orientationChangeTimeout)
;_orientationChangeTimeout=setTimeout((function(){if(_viewportSize.x!==self.scrollWrap.clientWidth)self.updateSize()}),500)},scroll:_updatePageScrollOffset,keydown:_onKeyDown,click:_onGlobalClick}
;var oldPhone=_features.isOldIOSPhone||_features.isOldAndroid||_features.isMobileOpera;if(!_features.animationName||!_features.transform||oldPhone)_options.showAnimationDuration=_options.hideAnimationDuration=0
;for(i=0;i<_modules.length;i++)self["init"+_modules[i]]();if(UiClass){var ui=self.ui=new UiClass(self,framework);ui.init()}_shout("firstUpdate");_currentItemIndex=_currentItemIndex||_options.index||0
;if(isNaN(_currentItemIndex)||_currentItemIndex<0||_currentItemIndex>=_getNumItems())_currentItemIndex=0;self.currItem=_getItemAt(_currentItemIndex);if(_features.isOldIOSPhone||_features.isOldAndroid)_isFixedPosition=false
;template.setAttribute("aria-hidden","false");if(_options.modal)if(!_isFixedPosition){template.style.position="absolute";template.style.top=framework.getScrollY()+"px"}else template.style.position="fixed";if(void 0===_currentWindowScrollY){
_shout("initialLayout");_currentWindowScrollY=_initalWindowScrollY=framework.getScrollY()}var rootClasses="pswp--open ";if(_options.mainClass)rootClasses+=_options.mainClass+" "
;if(_options.showHideOpacity)rootClasses+="pswp--animate_opacity ";rootClasses+=_likelyTouchDevice?"pswp--touch":"pswp--notouch";rootClasses+=_features.animationName?" pswp--css_animation":"";rootClasses+=_features.svg?" pswp--svg":""
;framework.addClass(template,rootClasses);self.updateSize();_containerShiftIndex=-1;_indexDiff=null;for(i=0;i<NUM_HOLDERS;i++)_setTranslateX((i+_containerShiftIndex)*_slideSize.x,_itemHolders[i].el.style)
;if(!_oldIE)framework.bind(self.scrollWrap,_downEvents,self);_listen("initialZoomInEnd",(function(){self.setContent(_itemHolders[0],_currentItemIndex-1);self.setContent(_itemHolders[2],_currentItemIndex+1)
;_itemHolders[0].el.style.display=_itemHolders[2].el.style.display="block";if(_options.focus)template.focus();_bindEvents()}));self.setContent(_itemHolders[1],_currentItemIndex);self.updateCurrItem();_shout("afterInit")
;if(!_isFixedPosition)_updateSizeInterval=setInterval((function(){if(!_numAnimations&&!_isDragging&&!_isZooming&&_currZoomLevel===self.currItem.initialZoomLevel)self.updateSize()}),1e3);framework.addClass(template,"pswp--visible")},
close:function(){if(!_isOpen)return;_isOpen=false;_isDestroying=true;_shout("close");_unbindEvents();_showOrHide(self.currItem,null,true,self.destroy)},destroy:function(){_shout("destroy")
;if(_showOrHideTimeout)clearTimeout(_showOrHideTimeout);template.setAttribute("aria-hidden","true");template.className=_initalClassName;if(_updateSizeInterval)clearInterval(_updateSizeInterval)
;framework.unbind(self.scrollWrap,_downEvents,self);framework.unbind(window,"scroll",self);_stopDragUpdateLoop();_stopAllAnimations();_listeners=null},panTo:function(x,y,force){if(!force){
if(x>_currPanBounds.min.x)x=_currPanBounds.min.x;else if(x<_currPanBounds.max.x)x=_currPanBounds.max.x;if(y>_currPanBounds.min.y)y=_currPanBounds.min.y;else if(y<_currPanBounds.max.y)y=_currPanBounds.max.y}_panOffset.x=x;_panOffset.y=y
;_applyCurrentZoomPan()},handleEvent:function(e){e=e||window.event;if(_globalEventHandlers[e.type])_globalEventHandlers[e.type](e)},goTo:function(index){index=_getLoopedId(index);var diff=index-_currentItemIndex;_indexDiff=diff
;_currentItemIndex=index;self.currItem=_getItemAt(_currentItemIndex);_currPositionIndex-=diff;_moveMainScroll(_slideSize.x*_currPositionIndex);_stopAllAnimations();_mainScrollAnimating=false;self.updateCurrItem()},next:function(){
self.goTo(_currentItemIndex+1)},prev:function(){self.goTo(_currentItemIndex-1)},updateCurrZoomItem:function(emulateSetContent){if(emulateSetContent)_shout("beforeChange",0);if(_itemHolders[1].el.children.length){
var zoomElement=_itemHolders[1].el.children[0];if(framework.hasClass(zoomElement,"pswp__zoom-wrap"))_currZoomElementStyle=zoomElement.style;else _currZoomElementStyle=null}else _currZoomElementStyle=null;_currPanBounds=self.currItem.bounds
;_startZoomLevel=_currZoomLevel=self.currItem.initialZoomLevel;_panOffset.x=_currPanBounds.center.x;_panOffset.y=_currPanBounds.center.y;if(emulateSetContent)_shout("afterChange")},invalidateCurrItems:function(){_itemsNeedUpdate=true
;for(var i=0;i<NUM_HOLDERS;i++)if(_itemHolders[i].item)_itemHolders[i].item.needsUpdate=true},updateCurrItem:function(beforeAnimation){if(0===_indexDiff)return;var diffAbs=Math.abs(_indexDiff),tempHolder;if(beforeAnimation&&diffAbs<2)return
;self.currItem=_getItemAt(_currentItemIndex);_renderMaxResolution=false;_shout("beforeChange",_indexDiff);if(diffAbs>=NUM_HOLDERS){_containerShiftIndex+=_indexDiff+(_indexDiff>0?-NUM_HOLDERS:NUM_HOLDERS);diffAbs=NUM_HOLDERS}
for(var i=0;i<diffAbs;i++)if(_indexDiff>0){tempHolder=_itemHolders.shift();_itemHolders[NUM_HOLDERS-1]=tempHolder;_containerShiftIndex++;_setTranslateX((_containerShiftIndex+2)*_slideSize.x,tempHolder.el.style)
;self.setContent(tempHolder,_currentItemIndex-diffAbs+i+1+1)}else{tempHolder=_itemHolders.pop();_itemHolders.unshift(tempHolder);_containerShiftIndex--;_setTranslateX(_containerShiftIndex*_slideSize.x,tempHolder.el.style)
;self.setContent(tempHolder,_currentItemIndex+diffAbs-i-1-1)}if(_currZoomElementStyle&&1===Math.abs(_indexDiff)){var prevItem=_getItemAt(_prevItemIndex);if(prevItem.initialZoomLevel!==_currZoomLevel){
_calculateItemSize(prevItem,_viewportSize);_setImageSize(prevItem);_applyZoomPanToItem(prevItem)}}_indexDiff=0;self.updateCurrZoomItem();_prevItemIndex=_currentItemIndex;_shout("afterChange")},updateSize:function(force){
if(!_isFixedPosition&&_options.modal){var windowScrollY=framework.getScrollY();if(_currentWindowScrollY!==windowScrollY){template.style.top=windowScrollY+"px";_currentWindowScrollY=windowScrollY}
if(!force&&_windowVisibleSize.x===window.innerWidth&&_windowVisibleSize.y===window.innerHeight)return;_windowVisibleSize.x=window.innerWidth;_windowVisibleSize.y=window.innerHeight;template.style.height=_windowVisibleSize.y+"px"}
_viewportSize.x=self.scrollWrap.clientWidth;_viewportSize.y=self.scrollWrap.clientHeight;_updatePageScrollOffset();_slideSize.x=_viewportSize.x+Math.round(_viewportSize.x*_options.spacing);_slideSize.y=_viewportSize.y
;_moveMainScroll(_slideSize.x*_currPositionIndex);_shout("beforeResize");if(void 0!==_containerShiftIndex){var holder,item,hIndex;for(var i=0;i<NUM_HOLDERS;i++){holder=_itemHolders[i]
;_setTranslateX((i+_containerShiftIndex)*_slideSize.x,holder.el.style);hIndex=_currentItemIndex+i-1;if(_options.loop&&_getNumItems()>2)hIndex=_getLoopedId(hIndex);item=_getItemAt(hIndex)
;if(item&&(_itemsNeedUpdate||item.needsUpdate||!item.bounds)){self.cleanSlide(item);self.setContent(holder,hIndex);if(1===i){self.currItem=item;self.updateCurrZoomItem(true)}item.needsUpdate=false
}else if(-1===holder.index&&hIndex>=0)self.setContent(holder,hIndex);if(item&&item.container){_calculateItemSize(item,_viewportSize);_setImageSize(item);_applyZoomPanToItem(item)}}_itemsNeedUpdate=false}
_startZoomLevel=_currZoomLevel=self.currItem.initialZoomLevel;_currPanBounds=self.currItem.bounds;if(_currPanBounds){_panOffset.x=_currPanBounds.center.x;_panOffset.y=_currPanBounds.center.y;_applyCurrentZoomPan(true)}_shout("resize")},
zoomTo:function(destZoomLevel,centerPoint,speed,easingFn,updateFn){if(centerPoint){_startZoomLevel=_currZoomLevel;_midZoomPoint.x=Math.abs(centerPoint.x)-_panOffset.x;_midZoomPoint.y=Math.abs(centerPoint.y)-_panOffset.y
;_equalizePoints(_startPanOffset,_panOffset)}var destPanBounds=_calculatePanBounds(destZoomLevel,false),destPanOffset={};_modifyDestPanOffset("x",destPanBounds,destPanOffset,destZoomLevel)
;_modifyDestPanOffset("y",destPanBounds,destPanOffset,destZoomLevel);var initialZoomLevel=_currZoomLevel;var initialPanOffset={x:_panOffset.x,y:_panOffset.y};_roundPoint(destPanOffset);var onUpdate=function(now){if(1===now){
_currZoomLevel=destZoomLevel;_panOffset.x=destPanOffset.x;_panOffset.y=destPanOffset.y}else{_currZoomLevel=(destZoomLevel-initialZoomLevel)*now+initialZoomLevel;_panOffset.x=(destPanOffset.x-initialPanOffset.x)*now+initialPanOffset.x
;_panOffset.y=(destPanOffset.y-initialPanOffset.y)*now+initialPanOffset.y}if(updateFn)updateFn(now);_applyCurrentZoomPan(1===now)}
;if(speed)_animateProp("customZoomTo",0,1,speed,easingFn||framework.easing.sine.inOut,onUpdate);else onUpdate(1)}};var MIN_SWIPE_DISTANCE=30,DIRECTION_CHECK_OFFSET=10
;var _gestureStartTime,_gestureCheckSpeedTime,p={},p2={},delta={},_currPoint={},_startPoint={},_currPointers=[],_startMainScrollPos={},_releaseAnimData,_posPoints=[],_tempPoint={},_isZoomingIn,_verticalDragInitiated,_oldAndroidTouchEndTimeout,_currZoomedItemIndex=0,_centerPoint=_getEmptyPoint(),_lastReleaseTime=0,_isDragging,_isMultitouch,_zoomStarted,_moved,_dragAnimFrame,_mainScrollShifted,_currentPoints,_isZooming,_currPointsDistance,_startPointsDistance,_currPanBounds,_mainScrollPos=_getEmptyPoint(),_currZoomElementStyle,_mainScrollAnimating,_midZoomPoint=_getEmptyPoint(),_currCenterPoint=_getEmptyPoint(),_direction,_isFirstMove,_opacityChanged,_bgOpacity,_wasOverInitialZoom,_isEqualPoints=function(p1,p2){
return p1.x===p2.x&&p1.y===p2.y},_isNearbyPoints=function(touch0,touch1){return Math.abs(touch0.x-touch1.x)<DOUBLE_TAP_RADIUS&&Math.abs(touch0.y-touch1.y)<DOUBLE_TAP_RADIUS},_calculatePointsDistance=function(p1,p2){
_tempPoint.x=Math.abs(p1.x-p2.x);_tempPoint.y=Math.abs(p1.y-p2.y);return Math.sqrt(_tempPoint.x*_tempPoint.x+_tempPoint.y*_tempPoint.y)},_stopDragUpdateLoop=function(){if(_dragAnimFrame){_cancelAF(_dragAnimFrame);_dragAnimFrame=null}
},_dragUpdateLoop=function(){if(_isDragging){_dragAnimFrame=_requestAF(_dragUpdateLoop);_renderMovement()}},_canPan=function(){return!("fit"===_options.scaleMode&&_currZoomLevel===self.currItem.initialZoomLevel)
},_closestElement=function(el,fn){if(!el||el===document)return false;if(el.getAttribute("class")&&el.getAttribute("class").indexOf("pswp__scroll-wrap")>-1)return false;if(fn(el))return el;return _closestElement(el.parentNode,fn)
},_preventObj={},_preventDefaultEventBehaviour=function(e,isDown){_preventObj.prevent=!_closestElement(e.target,_options.isClickableElement);_shout("preventDragEvent",e,isDown,_preventObj);return _preventObj.prevent
},_convertTouchToPoint=function(touch,p){p.x=touch.pageX;p.y=touch.pageY;p.id=touch.identifier;return p},_findCenterOfPoints=function(p1,p2,pCenter){pCenter.x=.5*(p1.x+p2.x);pCenter.y=.5*(p1.y+p2.y)},_pushPosPoint=function(time,x,y){
if(time-_gestureCheckSpeedTime>50){var o=_posPoints.length>2?_posPoints.shift():{};o.x=x;o.y=y;_posPoints.push(o);_gestureCheckSpeedTime=time}},_calculateVerticalDragOpacityRatio=function(){
var yOffset=_panOffset.y-self.currItem.initialPosition.y;return 1-Math.abs(yOffset/(_viewportSize.y/2))},_ePoint1={},_ePoint2={},_tempPointsArr=[],_tempCounter,_getTouchPoints=function(e){while(_tempPointsArr.length>0)_tempPointsArr.pop()
;if(!_pointerEventEnabled)if(e.type.indexOf("touch")>-1){if(e.touches&&e.touches.length>0){_tempPointsArr[0]=_convertTouchToPoint(e.touches[0],_ePoint1);if(e.touches.length>1)_tempPointsArr[1]=_convertTouchToPoint(e.touches[1],_ePoint2)}
}else{_ePoint1.x=e.pageX;_ePoint1.y=e.pageY;_ePoint1.id="";_tempPointsArr[0]=_ePoint1}else{_tempCounter=0;_currPointers.forEach((function(p){if(0===_tempCounter)_tempPointsArr[0]=p;else if(1===_tempCounter)_tempPointsArr[1]=p;_tempCounter++
}))}return _tempPointsArr},_panOrMoveMainScroll=function(axis,delta){
var panFriction,overDiff=0,newOffset=_panOffset[axis]+delta[axis],startOverDiff,dir=delta[axis]>0,newMainScrollPosition=_mainScrollPos.x+delta.x,mainScrollDiff=_mainScrollPos.x-_startMainScrollPos.x,newPanPos,newMainScrollPos
;if(newOffset>_currPanBounds.min[axis]||newOffset<_currPanBounds.max[axis])panFriction=_options.panEndFriction;else panFriction=1;newOffset=_panOffset[axis]+delta[axis]*panFriction
;if(_options.allowPanToNext||_currZoomLevel===self.currItem.initialZoomLevel){if(!_currZoomElementStyle)newMainScrollPos=newMainScrollPosition;else if("h"===_direction&&"x"===axis&&!_zoomStarted)if(dir){
if(newOffset>_currPanBounds.min[axis]){panFriction=_options.panEndFriction;overDiff=_currPanBounds.min[axis]-newOffset;startOverDiff=_currPanBounds.min[axis]-_startPanOffset[axis]}if((startOverDiff<=0||mainScrollDiff<0)&&_getNumItems()>1){
newMainScrollPos=newMainScrollPosition;if(mainScrollDiff<0&&newMainScrollPosition>_startMainScrollPos.x)newMainScrollPos=_startMainScrollPos.x}else if(_currPanBounds.min.x!==_currPanBounds.max.x)newPanPos=newOffset}else{
if(newOffset<_currPanBounds.max[axis]){panFriction=_options.panEndFriction;overDiff=newOffset-_currPanBounds.max[axis];startOverDiff=_startPanOffset[axis]-_currPanBounds.max[axis]}if((startOverDiff<=0||mainScrollDiff>0)&&_getNumItems()>1){
newMainScrollPos=newMainScrollPosition;if(mainScrollDiff>0&&newMainScrollPosition<_startMainScrollPos.x)newMainScrollPos=_startMainScrollPos.x}else if(_currPanBounds.min.x!==_currPanBounds.max.x)newPanPos=newOffset}if("x"===axis){
if(void 0!==newMainScrollPos){_moveMainScroll(newMainScrollPos,true);if(newMainScrollPos===_startMainScrollPos.x)_mainScrollShifted=false;else _mainScrollShifted=true}
if(_currPanBounds.min.x!==_currPanBounds.max.x)if(void 0!==newPanPos)_panOffset.x=newPanPos;else if(!_mainScrollShifted)_panOffset.x+=delta.x*panFriction;return void 0!==newMainScrollPos}}
if(!_mainScrollAnimating)if(!_mainScrollShifted)if(_currZoomLevel>self.currItem.fitRatio)_panOffset[axis]+=delta[axis]*panFriction},_onDragStart=function(e){if("mousedown"===e.type&&e.button>0)return;if(_initialZoomRunning){
e.preventDefault();return}if(_oldAndroidTouchEndTimeout&&"mousedown"===e.type)return;if(_preventDefaultEventBehaviour(e,true))e.preventDefault();_shout("pointerDown");if(_pointerEventEnabled){
var pointerIndex=framework.arraySearch(_currPointers,e.pointerId,"id");if(pointerIndex<0)pointerIndex=_currPointers.length;_currPointers[pointerIndex]={x:e.pageX,y:e.pageY,id:e.pointerId}}
var startPointsList=_getTouchPoints(e),numPoints=startPointsList.length;_currentPoints=null;_stopAllAnimations();if(!_isDragging||1===numPoints){_isDragging=_isFirstMove=true;framework.bind(window,_upMoveEvents,self)
;_isZoomingIn=_wasOverInitialZoom=_opacityChanged=_verticalDragInitiated=_mainScrollShifted=_moved=_isMultitouch=_zoomStarted=false;_direction=null;_shout("firstTouchStart",startPointsList);_equalizePoints(_startPanOffset,_panOffset)
;_currPanDist.x=_currPanDist.y=0;_equalizePoints(_currPoint,startPointsList[0]);_equalizePoints(_startPoint,_currPoint);_startMainScrollPos.x=_slideSize.x*_currPositionIndex;_posPoints=[{x:_currPoint.x,y:_currPoint.y}]
;_gestureCheckSpeedTime=_gestureStartTime=_getCurrentTime();_calculatePanBounds(_currZoomLevel,true);_stopDragUpdateLoop();_dragUpdateLoop()}if(!_isZooming&&numPoints>1&&!_mainScrollAnimating&&!_mainScrollShifted){
_startZoomLevel=_currZoomLevel;_zoomStarted=false;_isZooming=_isMultitouch=true;_currPanDist.y=_currPanDist.x=0;_equalizePoints(_startPanOffset,_panOffset);_equalizePoints(p,startPointsList[0]);_equalizePoints(p2,startPointsList[1])
;_findCenterOfPoints(p,p2,_currCenterPoint);_midZoomPoint.x=Math.abs(_currCenterPoint.x)-_panOffset.x;_midZoomPoint.y=Math.abs(_currCenterPoint.y)-_panOffset.y;_currPointsDistance=_startPointsDistance=_calculatePointsDistance(p,p2)}
},_onDragMove=function(e){e.preventDefault();if(_pointerEventEnabled){var pointerIndex=framework.arraySearch(_currPointers,e.pointerId,"id");if(pointerIndex>-1){var p=_currPointers[pointerIndex];p.x=e.pageX;p.y=e.pageY}}if(_isDragging){
var touchesList=_getTouchPoints(e);if(!_direction&&!_moved&&!_isZooming)if(_mainScrollPos.x!==_slideSize.x*_currPositionIndex)_direction="h";else{var diff=Math.abs(touchesList[0].x-_currPoint.x)-Math.abs(touchesList[0].y-_currPoint.y)
;if(Math.abs(diff)>=DIRECTION_CHECK_OFFSET){_direction=diff>0?"h":"v";_currentPoints=touchesList}}else _currentPoints=touchesList}},_renderMovement=function(){if(!_currentPoints)return;var numPoints=_currentPoints.length
;if(0===numPoints)return;_equalizePoints(p,_currentPoints[0]);delta.x=p.x-_currPoint.x;delta.y=p.y-_currPoint.y;if(_isZooming&&numPoints>1){_currPoint.x=p.x;_currPoint.y=p.y;if(!delta.x&&!delta.y&&_isEqualPoints(_currentPoints[1],p2))return
;_equalizePoints(p2,_currentPoints[1]);if(!_zoomStarted){_zoomStarted=true;_shout("zoomGestureStarted")}var pointsDistance=_calculatePointsDistance(p,p2);var zoomLevel=_calculateZoomLevel(pointsDistance)
;if(zoomLevel>self.currItem.initialZoomLevel+self.currItem.initialZoomLevel/15)_wasOverInitialZoom=true;var zoomFriction=1,minZoomLevel=_getMinZoomLevel(),maxZoomLevel=_getMaxZoomLevel()
;if(zoomLevel<minZoomLevel)if(_options.pinchToClose&&!_wasOverInitialZoom&&_startZoomLevel<=self.currItem.initialZoomLevel){var minusDiff=minZoomLevel-zoomLevel;var percent=1-minusDiff/(minZoomLevel/1.2);_applyBgOpacity(percent)
;_shout("onPinchClose",percent);_opacityChanged=true}else{zoomFriction=(minZoomLevel-zoomLevel)/minZoomLevel;if(zoomFriction>1)zoomFriction=1;zoomLevel=minZoomLevel-zoomFriction*(minZoomLevel/3)}else if(zoomLevel>maxZoomLevel){
zoomFriction=(zoomLevel-maxZoomLevel)/(6*minZoomLevel);if(zoomFriction>1)zoomFriction=1;zoomLevel=maxZoomLevel+zoomFriction*minZoomLevel}if(zoomFriction<0)zoomFriction=0;_currPointsDistance=pointsDistance
;_findCenterOfPoints(p,p2,_centerPoint);_currPanDist.x+=_centerPoint.x-_currCenterPoint.x;_currPanDist.y+=_centerPoint.y-_currCenterPoint.y;_equalizePoints(_currCenterPoint,_centerPoint);_panOffset.x=_calculatePanOffset("x",zoomLevel)
;_panOffset.y=_calculatePanOffset("y",zoomLevel);_isZoomingIn=zoomLevel>_currZoomLevel;_currZoomLevel=zoomLevel;_applyCurrentZoomPan()}else{if(!_direction)return;if(_isFirstMove){_isFirstMove=false
;if(Math.abs(delta.x)>=DIRECTION_CHECK_OFFSET)delta.x-=_currentPoints[0].x-_startPoint.x;if(Math.abs(delta.y)>=DIRECTION_CHECK_OFFSET)delta.y-=_currentPoints[0].y-_startPoint.y}_currPoint.x=p.x;_currPoint.y=p.y
;if(0===delta.x&&0===delta.y)return;if("v"===_direction&&_options.closeOnVerticalDrag)if(!_canPan()){_currPanDist.y+=delta.y;_panOffset.y+=delta.y;var opacityRatio=_calculateVerticalDragOpacityRatio();_verticalDragInitiated=true
;_shout("onVerticalDrag",opacityRatio);_applyBgOpacity(opacityRatio);_applyCurrentZoomPan();return}_pushPosPoint(_getCurrentTime(),p.x,p.y);_moved=true;_currPanBounds=self.currItem.bounds
;var mainScrollChanged=_panOrMoveMainScroll("x",delta);if(!mainScrollChanged){_panOrMoveMainScroll("y",delta);_roundPoint(_panOffset);_applyCurrentZoomPan()}}},_onDragRelease=function(e){if(_features.isOldAndroid){
if(_oldAndroidTouchEndTimeout&&"mouseup"===e.type)return;if(e.type.indexOf("touch")>-1){clearTimeout(_oldAndroidTouchEndTimeout);_oldAndroidTouchEndTimeout=setTimeout((function(){_oldAndroidTouchEndTimeout=0}),600)}}_shout("pointerUp")
;if(_preventDefaultEventBehaviour(e,false))e.preventDefault();var releasePoint;if(_pointerEventEnabled){var pointerIndex=framework.arraySearch(_currPointers,e.pointerId,"id");if(pointerIndex>-1){
releasePoint=_currPointers.splice(pointerIndex,1)[0];if(navigator.msPointerEnabled){var MSPOINTER_TYPES={4:"mouse",2:"touch",3:"pen"};releasePoint.type=MSPOINTER_TYPES[e.pointerType]
;if(!releasePoint.type)releasePoint.type=e.pointerType||"mouse"}else releasePoint.type=e.pointerType||"mouse"}}var touchList=_getTouchPoints(e),gestureType,numPoints=touchList.length;if("mouseup"===e.type)numPoints=0;if(2===numPoints){
_currentPoints=null;return true}if(1===numPoints)_equalizePoints(_startPoint,touchList[0]);if(0===numPoints&&!_direction&&!_mainScrollAnimating){if(!releasePoint)if("mouseup"===e.type)releasePoint={x:e.pageX,y:e.pageY,type:"mouse"
};else if(e.changedTouches&&e.changedTouches[0])releasePoint={x:e.changedTouches[0].pageX,y:e.changedTouches[0].pageY,type:"touch"};_shout("touchRelease",e,releasePoint)}var releaseTimeDiff=-1;if(0===numPoints){_isDragging=false
;framework.unbind(window,_upMoveEvents,self);_stopDragUpdateLoop();if(_isZooming)releaseTimeDiff=0;else if(-1!==_lastReleaseTime)releaseTimeDiff=_getCurrentTime()-_lastReleaseTime}_lastReleaseTime=1===numPoints?_getCurrentTime():-1
;if(-1!==releaseTimeDiff&&releaseTimeDiff<150)gestureType="zoom";else gestureType="swipe";if(_isZooming&&numPoints<2){_isZooming=false;if(1===numPoints)gestureType="zoomPointerUp";_shout("zoomGestureEnded")}_currentPoints=null
;if(!_moved&&!_zoomStarted&&!_mainScrollAnimating&&!_verticalDragInitiated)return;_stopAllAnimations();if(!_releaseAnimData)_releaseAnimData=_initDragReleaseAnimationData();_releaseAnimData.calculateSwipeSpeed("x")
;if(_verticalDragInitiated){var opacityRatio=_calculateVerticalDragOpacityRatio();if(opacityRatio<_options.verticalDragRange)self.close();else{var initalPanY=_panOffset.y,initialBgOpacity=_bgOpacity
;_animateProp("verticalDrag",0,1,300,framework.easing.cubic.out,(function(now){_panOffset.y=(self.currItem.initialPosition.y-initalPanY)*now+initalPanY;_applyBgOpacity((1-initialBgOpacity)*now+initialBgOpacity);_applyCurrentZoomPan()}))
;_shout("onVerticalDrag",1)}return}if((_mainScrollShifted||_mainScrollAnimating)&&0===numPoints){var itemChanged=_finishSwipeMainScrollGesture(gestureType,_releaseAnimData);if(itemChanged)return;gestureType="zoomPointerUp"}
if(_mainScrollAnimating)return;if("swipe"!==gestureType){_completeZoomGesture();return}if(!_mainScrollShifted&&_currZoomLevel>self.currItem.fitRatio)_completePanGesture(_releaseAnimData)},_initDragReleaseAnimationData=function(){
var lastFlickDuration,tempReleasePos;var s={lastFlickOffset:{},lastFlickDist:{},lastFlickSpeed:{},slowDownRatio:{},slowDownRatioReverse:{},speedDecelerationRatio:{},speedDecelerationRatioAbs:{},distanceOffset:{},backAnimDestination:{},
backAnimStarted:{},calculateSwipeSpeed:function(axis){if(_posPoints.length>1){lastFlickDuration=_getCurrentTime()-_gestureCheckSpeedTime+50;tempReleasePos=_posPoints[_posPoints.length-2][axis]}else{
lastFlickDuration=_getCurrentTime()-_gestureStartTime;tempReleasePos=_startPoint[axis]}s.lastFlickOffset[axis]=_currPoint[axis]-tempReleasePos;s.lastFlickDist[axis]=Math.abs(s.lastFlickOffset[axis])
;if(s.lastFlickDist[axis]>20)s.lastFlickSpeed[axis]=s.lastFlickOffset[axis]/lastFlickDuration;else s.lastFlickSpeed[axis]=0;if(Math.abs(s.lastFlickSpeed[axis])<.1)s.lastFlickSpeed[axis]=0;s.slowDownRatio[axis]=.95
;s.slowDownRatioReverse[axis]=1-s.slowDownRatio[axis];s.speedDecelerationRatio[axis]=1},calculateOverBoundsAnimOffset:function(axis,speed){if(!s.backAnimStarted[axis]){
if(_panOffset[axis]>_currPanBounds.min[axis])s.backAnimDestination[axis]=_currPanBounds.min[axis];else if(_panOffset[axis]<_currPanBounds.max[axis])s.backAnimDestination[axis]=_currPanBounds.max[axis]
;if(void 0!==s.backAnimDestination[axis]){s.slowDownRatio[axis]=.7;s.slowDownRatioReverse[axis]=1-s.slowDownRatio[axis];if(s.speedDecelerationRatioAbs[axis]<.05){s.lastFlickSpeed[axis]=0;s.backAnimStarted[axis]=true
;_animateProp("bounceZoomPan"+axis,_panOffset[axis],s.backAnimDestination[axis],speed||300,framework.easing.sine.out,(function(pos){_panOffset[axis]=pos;_applyCurrentZoomPan()}))}}}},calculateAnimOffset:function(axis){
if(!s.backAnimStarted[axis]){s.speedDecelerationRatio[axis]=s.speedDecelerationRatio[axis]*(s.slowDownRatio[axis]+s.slowDownRatioReverse[axis]-s.slowDownRatioReverse[axis]*s.timeDiff/10)
;s.speedDecelerationRatioAbs[axis]=Math.abs(s.lastFlickSpeed[axis]*s.speedDecelerationRatio[axis]);s.distanceOffset[axis]=s.lastFlickSpeed[axis]*s.speedDecelerationRatio[axis]*s.timeDiff;_panOffset[axis]+=s.distanceOffset[axis]}},
panAnimLoop:function(){if(_animations.zoomPan){_animations.zoomPan.raf=_requestAF(s.panAnimLoop);s.now=_getCurrentTime();s.timeDiff=s.now-s.lastNow;s.lastNow=s.now;s.calculateAnimOffset("x");s.calculateAnimOffset("y");_applyCurrentZoomPan()
;s.calculateOverBoundsAnimOffset("x");s.calculateOverBoundsAnimOffset("y");if(s.speedDecelerationRatioAbs.x<.05&&s.speedDecelerationRatioAbs.y<.05){_panOffset.x=Math.round(_panOffset.x);_panOffset.y=Math.round(_panOffset.y)
;_applyCurrentZoomPan();_stopAnimation("zoomPan");return}}}};return s},_completePanGesture=function(animData){animData.calculateSwipeSpeed("y");_currPanBounds=self.currItem.bounds;animData.backAnimDestination={};animData.backAnimStarted={}
;if(Math.abs(animData.lastFlickSpeed.x)<=.05&&Math.abs(animData.lastFlickSpeed.y)<=.05){animData.speedDecelerationRatioAbs.x=animData.speedDecelerationRatioAbs.y=0;animData.calculateOverBoundsAnimOffset("x")
;animData.calculateOverBoundsAnimOffset("y");return true}_registerStartAnimation("zoomPan");animData.lastNow=_getCurrentTime();animData.panAnimLoop()},_finishSwipeMainScrollGesture=function(gestureType,_releaseAnimData){var itemChanged
;if(!_mainScrollAnimating)_currZoomedItemIndex=_currentItemIndex;var itemsDiff;if("swipe"===gestureType){var totalShiftDist=_currPoint.x-_startPoint.x,isFastLastFlick=_releaseAnimData.lastFlickDist.x<10
;if(totalShiftDist>MIN_SWIPE_DISTANCE&&(isFastLastFlick||_releaseAnimData.lastFlickOffset.x>20))itemsDiff=-1;else if(totalShiftDist<-MIN_SWIPE_DISTANCE&&(isFastLastFlick||_releaseAnimData.lastFlickOffset.x<-20))itemsDiff=1}var nextCircle
;if(itemsDiff){_currentItemIndex+=itemsDiff;if(_currentItemIndex<0){_currentItemIndex=_options.loop?_getNumItems()-1:0;nextCircle=true}else if(_currentItemIndex>=_getNumItems()){_currentItemIndex=_options.loop?0:_getNumItems()-1
;nextCircle=true}if(!nextCircle||_options.loop){_indexDiff+=itemsDiff;_currPositionIndex-=itemsDiff;itemChanged=true}}var animateToX=_slideSize.x*_currPositionIndex;var animateToDist=Math.abs(animateToX-_mainScrollPos.x)
;var finishAnimDuration;if(!itemChanged&&animateToX>_mainScrollPos.x!==_releaseAnimData.lastFlickSpeed.x>0)finishAnimDuration=333;else{
finishAnimDuration=Math.abs(_releaseAnimData.lastFlickSpeed.x)>0?animateToDist/Math.abs(_releaseAnimData.lastFlickSpeed.x):333;finishAnimDuration=Math.min(finishAnimDuration,400);finishAnimDuration=Math.max(finishAnimDuration,250)}
if(_currZoomedItemIndex===_currentItemIndex)itemChanged=false;_mainScrollAnimating=true;_shout("mainScrollAnimStart")
;_animateProp("mainScroll",_mainScrollPos.x,animateToX,finishAnimDuration,framework.easing.cubic.out,_moveMainScroll,(function(){_stopAllAnimations();_mainScrollAnimating=false;_currZoomedItemIndex=-1
;if(itemChanged||_currZoomedItemIndex!==_currentItemIndex)self.updateCurrItem();_shout("mainScrollAnimComplete")}));if(itemChanged)self.updateCurrItem(true);return itemChanged},_calculateZoomLevel=function(touchesDistance){
return 1/_startPointsDistance*touchesDistance*_startZoomLevel},_completeZoomGesture=function(){var destZoomLevel=_currZoomLevel,minZoomLevel=_getMinZoomLevel(),maxZoomLevel=_getMaxZoomLevel()
;if(_currZoomLevel<minZoomLevel)destZoomLevel=minZoomLevel;else if(_currZoomLevel>maxZoomLevel)destZoomLevel=maxZoomLevel;var destOpacity=1,onUpdate,initialOpacity=_bgOpacity
;if(_opacityChanged&&!_isZoomingIn&&!_wasOverInitialZoom&&_currZoomLevel<minZoomLevel){self.close();return true}if(_opacityChanged)onUpdate=function(now){_applyBgOpacity((destOpacity-initialOpacity)*now+initialOpacity)}
;self.zoomTo(destZoomLevel,0,200,framework.easing.cubic.out,onUpdate);return true};_registerModule("Gestures",{publicMethods:{initGestures:function(){var addEventNames=function(pref,down,move,up,cancel){_dragStartEvent=pref+down
;_dragMoveEvent=pref+move;_dragEndEvent=pref+up;if(cancel)_dragCancelEvent=pref+cancel;else _dragCancelEvent=""};_pointerEventEnabled=_features.pointerEvent;if(_pointerEventEnabled&&_features.touch)_features.touch=false
;if(_pointerEventEnabled)if(navigator.msPointerEnabled)addEventNames("MSPointer","Down","Move","Up","Cancel");else addEventNames("pointer","down","move","up","cancel");else if(_features.touch){
addEventNames("touch","start","move","end","cancel");_likelyTouchDevice=true}else addEventNames("mouse","down","move","up");_upMoveEvents=_dragMoveEvent+" "+_dragEndEvent+" "+_dragCancelEvent;_downEvents=_dragStartEvent
;if(_pointerEventEnabled&&!_likelyTouchDevice)_likelyTouchDevice=navigator.maxTouchPoints>1||navigator.msMaxTouchPoints>1;self.likelyTouchDevice=_likelyTouchDevice;_globalEventHandlers[_dragStartEvent]=_onDragStart
;_globalEventHandlers[_dragMoveEvent]=_onDragMove;_globalEventHandlers[_dragEndEvent]=_onDragRelease;if(_dragCancelEvent)_globalEventHandlers[_dragCancelEvent]=_globalEventHandlers[_dragEndEvent];if(_features.touch){
_downEvents+=" mousedown";_upMoveEvents+=" mousemove mouseup";_globalEventHandlers.mousedown=_globalEventHandlers[_dragStartEvent];_globalEventHandlers.mousemove=_globalEventHandlers[_dragMoveEvent]
;_globalEventHandlers.mouseup=_globalEventHandlers[_dragEndEvent]}if(!_likelyTouchDevice)_options.allowPanToNext=false}}});var _showOrHideTimeout,_showOrHide=function(item,img,out,completeFn){
if(_showOrHideTimeout)clearTimeout(_showOrHideTimeout);_initialZoomRunning=true;_initialContentSet=true;var thumbBounds;if(item.initialLayout){thumbBounds=item.initialLayout;item.initialLayout=null
}else thumbBounds=_options.getThumbBoundsFn&&_options.getThumbBoundsFn(_currentItemIndex);var duration=out?_options.hideAnimationDuration:_options.showAnimationDuration;var onComplete=function(){_stopAnimation("initialZoom");if(!out){
_applyBgOpacity(1);if(img)img.style.display="block";framework.addClass(template,"pswp--animated-in");_shout("initialZoom"+(out?"OutEnd":"InEnd"))}else{self.template.removeAttribute("style");self.bg.removeAttribute("style")}
if(completeFn)completeFn();_initialZoomRunning=false};if(!duration||!thumbBounds||void 0===thumbBounds.x){_shout("initialZoom"+(out?"Out":"In"));_currZoomLevel=item.initialZoomLevel;_equalizePoints(_panOffset,item.initialPosition)
;_applyCurrentZoomPan();template.style.opacity=out?0:1;_applyBgOpacity(1);if(duration)setTimeout((function(){onComplete()}),duration);else onComplete();return}var startAnimation=function(){
var closeWithRaf=_closedByScroll,fadeEverything=!self.currItem.src||self.currItem.loadError||_options.showHideOpacity;if(item.miniImg)item.miniImg.style.webkitBackfaceVisibility="hidden";if(!out){_currZoomLevel=thumbBounds.w/item.w
;_panOffset.x=thumbBounds.x;_panOffset.y=thumbBounds.y-_initalWindowScrollY;self[fadeEverything?"template":"bg"].style.opacity=.001;_applyCurrentZoomPan()}_registerStartAnimation("initialZoom")
;if(out&&!closeWithRaf)framework.removeClass(template,"pswp--animated-in");if(fadeEverything)if(out)framework[(closeWithRaf?"remove":"add")+"Class"](template,"pswp--animate_opacity");else setTimeout((function(){
framework.addClass(template,"pswp--animate_opacity")}),30);_showOrHideTimeout=setTimeout((function(){_shout("initialZoom"+(out?"Out":"In"));if(!out){_currZoomLevel=item.initialZoomLevel;_equalizePoints(_panOffset,item.initialPosition)
;_applyCurrentZoomPan();_applyBgOpacity(1);if(fadeEverything)template.style.opacity=1;else _applyBgOpacity(1);_showOrHideTimeout=setTimeout(onComplete,duration+20)}else{var destZoomLevel=thumbBounds.w/item.w,initialPanOffset={
x:_panOffset.x,y:_panOffset.y},initialZoomLevel=_currZoomLevel,initalBgOpacity=_bgOpacity,onUpdate=function(now){if(1===now){_currZoomLevel=destZoomLevel;_panOffset.x=thumbBounds.x;_panOffset.y=thumbBounds.y-_currentWindowScrollY}else{
_currZoomLevel=(destZoomLevel-initialZoomLevel)*now+initialZoomLevel;_panOffset.x=(thumbBounds.x-initialPanOffset.x)*now+initialPanOffset.x;_panOffset.y=(thumbBounds.y-_currentWindowScrollY-initialPanOffset.y)*now+initialPanOffset.y}
_applyCurrentZoomPan();if(fadeEverything)template.style.opacity=1-now;else _applyBgOpacity(initalBgOpacity-now*initalBgOpacity)};if(closeWithRaf)_animateProp("initialZoom",0,1,duration,framework.easing.cubic.out,onUpdate,onComplete);else{
onUpdate(1);_showOrHideTimeout=setTimeout(onComplete,duration+20)}}}),out?25:90)};startAnimation()};var _items,_tempPanAreaSize={},_imagesToAppendPool=[],_initialContentSet,_initialZoomRunning,_controllerDefaultOptions={index:0,
errorMsg:'<div class="pswp__error-msg"><a href="%url%" target="_blank">The image</a> could not be loaded.</div>',forceProgressiveLoading:false,preload:[1,1],getNumItemsFn:function(){return _items.length}}
;var _getItemAt,_getNumItems,_initialIsLoop,_getZeroBounds=function(){return{center:{x:0,y:0},max:{x:0,y:0},min:{x:0,y:0}}},_calculateSingleItemPanBounds=function(item,realPanElementW,realPanElementH){var bounds=item.bounds
;bounds.center.x=Math.round((_tempPanAreaSize.x-realPanElementW)/2);bounds.center.y=Math.round((_tempPanAreaSize.y-realPanElementH)/2)+item.vGap.top
;bounds.max.x=realPanElementW>_tempPanAreaSize.x?Math.round(_tempPanAreaSize.x-realPanElementW):bounds.center.x;bounds.max.y=realPanElementH>_tempPanAreaSize.y?Math.round(_tempPanAreaSize.y-realPanElementH)+item.vGap.top:bounds.center.y
;bounds.min.x=realPanElementW>_tempPanAreaSize.x?0:bounds.center.x;bounds.min.y=realPanElementH>_tempPanAreaSize.y?item.vGap.top:bounds.center.y},_calculateItemSize=function(item,viewportSize,zoomLevel){if(item.src&&!item.loadError){
var isInitial=!zoomLevel;if(isInitial){if(!item.vGap)item.vGap={top:0,bottom:0};_shout("parseVerticalMargin",item)}_tempPanAreaSize.x=viewportSize.x;_tempPanAreaSize.y=viewportSize.y-item.vGap.top-item.vGap.bottom;if(isInitial){
var hRatio=_tempPanAreaSize.x/item.w;var vRatio=_tempPanAreaSize.y/item.h;item.fitRatio=hRatio<vRatio?hRatio:vRatio;var scaleMode=_options.scaleMode;if("orig"===scaleMode)zoomLevel=1;else if("fit"===scaleMode)zoomLevel=item.fitRatio
;if(zoomLevel>1)zoomLevel=1;item.initialZoomLevel=zoomLevel;if(!item.bounds)item.bounds=_getZeroBounds()}if(!zoomLevel)return;_calculateSingleItemPanBounds(item,item.w*zoomLevel,item.h*zoomLevel)
;if(isInitial&&zoomLevel===item.initialZoomLevel)item.initialPosition=item.bounds.center;return item.bounds}else{item.w=item.h=0;item.initialZoomLevel=item.fitRatio=1;item.bounds=_getZeroBounds();item.initialPosition=item.bounds.center
;return item.bounds}},_appendImage=function(index,item,baseDiv,img,preventAnimation,keepPlaceholder){if(item.loadError)return;if(img){item.imageAppended=true;_setImageSize(item,img,item===self.currItem&&_renderMaxResolution)
;baseDiv.appendChild(img);if(keepPlaceholder)setTimeout((function(){if(item&&item.loaded&&item.placeholder){item.placeholder.style.display="none";item.placeholder=null}}),500)}},_preloadImage=function(item){item.loading=true
;item.loaded=false;var img=item.img=framework.createEl("pswp__img","img");var onComplete=function(){item.loading=false;item.loaded=true;if(item.loadComplete)item.loadComplete(item);else item.img=null;img.onload=img.onerror=null;img=null}
;img.onload=onComplete;img.onerror=function(){item.loadError=true;onComplete()};img.src=item.src;return img},_checkForError=function(item,cleanUp){if(item.src&&item.loadError&&item.container){if(cleanUp)item.container.innerHTML=""
;item.container.innerHTML=_options.errorMsg.replace("%url%",item.src);return true}},_setImageSize=function(item,img,maxRes){if(!item.src)return;if(!img)img=item.container.lastChild
;var w=maxRes?item.w:Math.round(item.w*item.fitRatio),h=maxRes?item.h:Math.round(item.h*item.fitRatio);if(item.placeholder&&!item.loaded){item.placeholder.style.width=w+"px";item.placeholder.style.height=h+"px"}img.style.width=w+"px"
;img.style.height=h+"px"},_appendImagesPool=function(){if(_imagesToAppendPool.length){var poolItem;for(var i=0;i<_imagesToAppendPool.length;i++){poolItem=_imagesToAppendPool[i]
;if(poolItem.holder.index===poolItem.index)_appendImage(poolItem.index,poolItem.item,poolItem.baseDiv,poolItem.img,false,poolItem.clearPlaceholder)}_imagesToAppendPool=[]}};_registerModule("Controller",{publicMethods:{
lazyLoadItem:function(index){index=_getLoopedId(index);var item=_getItemAt(index);if(!item||(item.loaded||item.loading)&&!_itemsNeedUpdate)return;_shout("gettingData",index,item);if(!item.src)return;_preloadImage(item)},
initController:function(){framework.extend(_options,_controllerDefaultOptions,true);self.items=_items=items;_getItemAt=self.getItemAt;_getNumItems=_options.getNumItemsFn;_initialIsLoop=_options.loop;if(_getNumItems()<3)_options.loop=false
;_listen("beforeChange",(function(diff){var p=_options.preload,isNext=null===diff?true:diff>=0,preloadBefore=Math.min(p[0],_getNumItems()),preloadAfter=Math.min(p[1],_getNumItems()),i
;for(i=1;i<=(isNext?preloadAfter:preloadBefore);i++)self.lazyLoadItem(_currentItemIndex+i);for(i=1;i<=(isNext?preloadBefore:preloadAfter);i++)self.lazyLoadItem(_currentItemIndex-i)}));_listen("initialLayout",(function(){
self.currItem.initialLayout=_options.getThumbBoundsFn&&_options.getThumbBoundsFn(_currentItemIndex)}));_listen("mainScrollAnimComplete",_appendImagesPool);_listen("initialZoomInEnd",_appendImagesPool);_listen("destroy",(function(){var item
;for(var i=0;i<_items.length;i++){item=_items[i];if(item.container)item.container=null;if(item.placeholder)item.placeholder=null;if(item.img)item.img=null;if(item.preloader)item.preloader=null
;if(item.loadError)item.loaded=item.loadError=false}_imagesToAppendPool=null}))},getItemAt:function(index){if(index>=0)return void 0!==_items[index]?_items[index]:false;return false},allowProgressiveImg:function(){
return _options.forceProgressiveLoading||!_likelyTouchDevice||_options.mouseUsed||screen.width>1200},setContent:function(holder,index){if(_options.loop)index=_getLoopedId(index);var prevItem=self.getItemAt(holder.index)
;if(prevItem)prevItem.container=null;var item=self.getItemAt(index),img;if(!item){holder.el.innerHTML="";return}_shout("gettingData",index,item);holder.index=index;holder.item=item
;var baseDiv=item.container=framework.createEl("pswp__zoom-wrap");if(!item.src&&item.html)if(item.html.tagName)baseDiv.appendChild(item.html);else baseDiv.innerHTML=item.html;_checkForError(item);_calculateItemSize(item,_viewportSize)
;if(item.src&&!item.loadError&&!item.loaded){item.loadComplete=function(item){if(!_isOpen)return;if(holder&&holder.index===index){if(_checkForError(item,true)){item.loadComplete=item.img=null;_calculateItemSize(item,_viewportSize)
;_applyZoomPanToItem(item);if(holder.index===_currentItemIndex)self.updateCurrZoomItem();return}if(!item.imageAppended)if(_features.transform&&(_mainScrollAnimating||_initialZoomRunning))_imagesToAppendPool.push({item:item,baseDiv:baseDiv,
img:item.img,index:index,holder:holder,clearPlaceholder:true});else _appendImage(index,item,baseDiv,item.img,_mainScrollAnimating||_initialZoomRunning,true);else if(!_initialZoomRunning&&item.placeholder){
item.placeholder.style.display="none";item.placeholder=null}}item.loadComplete=null;item.img=null;_shout("imageLoadComplete",index,item)};if(framework.features.transform){var placeholderClassName="pswp__img pswp__img--placeholder"
;placeholderClassName+=item.msrc?"":" pswp__img--placeholder--blank";var placeholder=framework.createEl(placeholderClassName,item.msrc?"img":"");if(item.msrc)placeholder.src=item.msrc;_setImageSize(item,placeholder)
;baseDiv.appendChild(placeholder);item.placeholder=placeholder}if(!item.loading)_preloadImage(item);if(self.allowProgressiveImg())if(!_initialContentSet&&_features.transform)_imagesToAppendPool.push({item:item,baseDiv:baseDiv,img:item.img,
index:index,holder:holder});else _appendImage(index,item,baseDiv,item.img,true,true)}else if(item.src&&!item.loadError){img=framework.createEl("pswp__img","img");img.style.opacity=1;img.src=item.src;_setImageSize(item,img)
;_appendImage(index,item,baseDiv,img,true)}if(!_initialContentSet&&index===_currentItemIndex){_currZoomElementStyle=baseDiv.style;_showOrHide(item,img||item.img)}else _applyZoomPanToItem(item);holder.el.innerHTML=""
;holder.el.appendChild(baseDiv)},cleanSlide:function(item){if(item.img)item.img.onload=item.img.onerror=null;item.loaded=item.loading=item.img=item.imageAppended=false}}})
;var tapTimer,tapReleasePoint={},_dispatchTapEvent=function(origEvent,releasePoint,pointerType){var e=document.createEvent("CustomEvent"),eDetail={origEvent:origEvent,target:origEvent.target,releasePoint:releasePoint,
pointerType:pointerType||"touch"};e.initCustomEvent("pswpTap",true,true,eDetail);origEvent.target.dispatchEvent(e)};_registerModule("Tap",{publicMethods:{initTap:function(){_listen("firstTouchStart",self.onTapStart)
;_listen("touchRelease",self.onTapRelease);_listen("destroy",(function(){tapReleasePoint={};tapTimer=null}))},onTapStart:function(touchList){if(touchList.length>1){clearTimeout(tapTimer);tapTimer=null}},
onTapRelease:function(e,releasePoint){if(!releasePoint)return;if(!_moved&&!_isMultitouch&&!_numAnimations){var p0=releasePoint;if(tapTimer){clearTimeout(tapTimer);tapTimer=null;if(_isNearbyPoints(p0,tapReleasePoint)){_shout("doubleTap",p0)
;return}}if("mouse"===releasePoint.type){_dispatchTapEvent(e,releasePoint,"mouse");return}var clickedTagName=e.target.tagName.toUpperCase();if("BUTTON"===clickedTagName||framework.hasClass(e.target,"pswp__single-tap")){
_dispatchTapEvent(e,releasePoint);return}_equalizePoints(tapReleasePoint,p0);tapTimer=setTimeout((function(){_dispatchTapEvent(e,releasePoint);tapTimer=null}),300)}}}});var _wheelDelta;_registerModule("DesktopZoom",{publicMethods:{
initDesktopZoom:function(){if(_oldIE)return;if(_likelyTouchDevice)_listen("mouseUsed",(function(){self.setupDesktopZoom()}));else self.setupDesktopZoom(true)},setupDesktopZoom:function(onInit){_wheelDelta={}
;var events="wheel mousewheel DOMMouseScroll";_listen("bindEvents",(function(){framework.bind(template,events,self.handleMouseWheel)}));_listen("unbindEvents",(function(){
if(_wheelDelta)framework.unbind(template,events,self.handleMouseWheel)}));self.mouseZoomedIn=false;var hasDraggingClass,updateZoomable=function(){if(self.mouseZoomedIn){framework.removeClass(template,"pswp--zoomed-in")
;self.mouseZoomedIn=false}if(_currZoomLevel<1)framework.addClass(template,"pswp--zoom-allowed");else framework.removeClass(template,"pswp--zoom-allowed");removeDraggingClass()},removeDraggingClass=function(){if(hasDraggingClass){
framework.removeClass(template,"pswp--dragging");hasDraggingClass=false}};_listen("resize",updateZoomable);_listen("afterChange",updateZoomable);_listen("pointerDown",(function(){if(self.mouseZoomedIn){hasDraggingClass=true
;framework.addClass(template,"pswp--dragging")}}));_listen("pointerUp",removeDraggingClass);if(!onInit)updateZoomable()},handleMouseWheel:function(e){if(_currZoomLevel<=self.currItem.fitRatio){
if(_options.modal)if(!_options.closeOnScroll||_numAnimations||_isDragging)e.preventDefault();else if(_transformKey&&Math.abs(e.deltaY)>2){_closedByScroll=true;self.close()}return true}e.stopPropagation();_wheelDelta.x=0
;if("deltaX"in e)if(1===e.deltaMode){_wheelDelta.x=18*e.deltaX;_wheelDelta.y=18*e.deltaY}else{_wheelDelta.x=e.deltaX;_wheelDelta.y=e.deltaY}else if("wheelDelta"in e){if(e.wheelDeltaX)_wheelDelta.x=-.16*e.wheelDeltaX
;if(e.wheelDeltaY)_wheelDelta.y=-.16*e.wheelDeltaY;else _wheelDelta.y=-.16*e.wheelDelta}else if("detail"in e)_wheelDelta.y=e.detail;else return;_calculatePanBounds(_currZoomLevel,true)
;var newPanX=_panOffset.x-_wheelDelta.x,newPanY=_panOffset.y-_wheelDelta.y;if(_options.modal||newPanX<=_currPanBounds.min.x&&newPanX>=_currPanBounds.max.x&&newPanY<=_currPanBounds.min.y&&newPanY>=_currPanBounds.max.y)e.preventDefault()
;self.panTo(newPanX,newPanY)},toggleDesktopZoom:function(centerPoint){centerPoint=centerPoint||{x:_viewportSize.x/2+_offset.x,y:_viewportSize.y/2+_offset.y};var doubleTapZoomLevel=_options.getDoubleTapZoom(true,self.currItem)
;var zoomOut=_currZoomLevel===doubleTapZoomLevel;self.mouseZoomedIn=!zoomOut;self.zoomTo(zoomOut?self.currItem.initialZoomLevel:doubleTapZoomLevel,centerPoint,333);framework[(!zoomOut?"add":"remove")+"Class"](template,"pswp--zoomed-in")}}})
;var _historyDefaultOptions={history:true,galleryUID:1}
;var _historyUpdateTimeout,_hashChangeTimeout,_hashAnimCheckTimeout,_hashChangedByScript,_hashChangedByHistory,_hashReseted,_initialHash,_historyChanged,_closedFromURL,_urlChangedOnce,_windowLoc,_supportsPushState,_getHash=function(){
return _windowLoc.hash.substring(1)},_cleanHistoryTimeouts=function(){if(_historyUpdateTimeout)clearTimeout(_historyUpdateTimeout);if(_hashAnimCheckTimeout)clearTimeout(_hashAnimCheckTimeout)},_parseItemIndexFromURL=function(){
var hash=_getHash(),params={};if(hash.length<5)return params;var i,vars=hash.split("&");for(i=0;i<vars.length;i++){if(!vars[i])continue;var pair=vars[i].split("=");if(pair.length<2)continue;params[pair[0]]=pair[1]}if(_options.galleryPIDs){
var searchfor=params.pid;params.pid=0;for(i=0;i<_items.length;i++)if(_items[i].pid===searchfor){params.pid=i;break}}else params.pid=parseInt(params.pid,10)-1;if(params.pid<0)params.pid=0;return params},_updateHash=function(){
if(_hashAnimCheckTimeout)clearTimeout(_hashAnimCheckTimeout);if(_numAnimations||_isDragging){_hashAnimCheckTimeout=setTimeout(_updateHash,500);return}if(_hashChangedByScript)clearTimeout(_hashChangeTimeout);else _hashChangedByScript=true
;var pid=_currentItemIndex+1;var item=_getItemAt(_currentItemIndex);if(item.hasOwnProperty("pid"))pid=item.pid;var newHash=_initialHash+"&"+"gid="+_options.galleryUID+"&"+"pid="+pid
;if(!_historyChanged)if(-1===_windowLoc.hash.indexOf(newHash))_urlChangedOnce=true;var newURL=_windowLoc.href.split("#")[0]+"#"+newHash;if(_supportsPushState){
if("#"+newHash!==window.location.hash)history[_historyChanged?"replaceState":"pushState"]("",document.title,newURL)}else if(_historyChanged)_windowLoc.replace(newURL);else _windowLoc.hash=newHash;_historyChanged=true
;_hashChangeTimeout=setTimeout((function(){_hashChangedByScript=false}),60)};_registerModule("History",{publicMethods:{initHistory:function(){framework.extend(_options,_historyDefaultOptions,true);if(!_options.history)return
;_windowLoc=window.location;_urlChangedOnce=false;_closedFromURL=false;_historyChanged=false;_initialHash=_getHash();_supportsPushState="pushState"in history;if(_initialHash.indexOf("gid=")>-1){_initialHash=_initialHash.split("&gid=")[0]
;_initialHash=_initialHash.split("?gid=")[0]}_listen("afterChange",self.updateURL);_listen("unbindEvents",(function(){framework.unbind(window,"hashchange",self.onHashChange)}));var returnToOriginal=function(){_hashReseted=true
;if(!_closedFromURL)if(_urlChangedOnce)history.back();else if(_initialHash)_windowLoc.hash=_initialHash;else if(_supportsPushState)history.pushState("",document.title,_windowLoc.pathname+_windowLoc.search);else _windowLoc.hash=""
;_cleanHistoryTimeouts()};_listen("unbindEvents",(function(){if(_closedByScroll)returnToOriginal()}));_listen("destroy",(function(){if(!_hashReseted)returnToOriginal()}));_listen("firstUpdate",(function(){
_currentItemIndex=_parseItemIndexFromURL().pid}));var index=_initialHash.indexOf("pid=");if(index>-1){_initialHash=_initialHash.substring(0,index);if("&"===_initialHash.slice(-1))_initialHash=_initialHash.slice(0,-1)}setTimeout((function(){
if(_isOpen)framework.bind(window,"hashchange",self.onHashChange)}),40)},onHashChange:function(){if(_getHash()===_initialHash){_closedFromURL=true;self.close();return}if(!_hashChangedByScript){_hashChangedByHistory=true
;self.goTo(_parseItemIndexFromURL().pid);_hashChangedByHistory=false}},updateURL:function(){_cleanHistoryTimeouts();if(_hashChangedByHistory)return;if(!_historyChanged)_updateHash();else _historyUpdateTimeout=setTimeout(_updateHash,800)}}})
;framework.extend(self,publicMethods)};return PhotoSwipe}))}},__webpack_require__=>{var __webpack_exec__=moduleId=>__webpack_require__(__webpack_require__.s=moduleId)
;__webpack_require__.O(0,[351,421,448,81,936,757,667],(()=>__webpack_exec__(364)));var __webpack_exports__=__webpack_require__.O()}]);