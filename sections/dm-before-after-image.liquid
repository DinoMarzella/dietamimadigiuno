{% assign data = section.settings %}
<!-- TWImageWithText -->
{% style %}
.bg-static {
  position: relative;
  max-width: {{ data.image_max_width }};
  width: 100%;
  margin: 0 auto;
  min-height:  {{ data.image_min_height }};
  background-image: url({{ data.image | img_url: 'master'  }});
  background-size: cover;
  background-position: center;
    }
.move {
    position: absolute;
    top: 0;
    bottom: 0;
    left: auto;
    width: 100%;
    background-image: url({{ data.image2 | img_url: 'master'  }});
    background-size: cover;
    background-position: center;
}  
.content {
    display: flex;
    align-items: center;
    justify-content: center;
}
{% endstyle %}

<div class='py-6 lg:overflow-hidden font-harmonia md:py-12 {%- if data.remove_padding %} md:py-0 {%- endif -%}' style="background-color: {{data.background_color}}">  
  <div class="mx-auto {% if data.full_width %}w-full{% else %} max-w-screen-2xl lg:px-8{% endif %} ">
      <div class='flex-col items-center justify-center md:flex-row'>
          <div class="w-full max-w-2xl px-4 mx-auto sm:px-6 lg:items-center lg:px-0 md:w-1/2">
          {% if data.pretitle.size > 0 %}
            <p class="accent-subtitle text-center">{{data.pretitle}}</p>
            {% endif %}
            {%- if data.title -%}
              <h3 class="justify-center mx-auto mb-16 text-center uppercase font-harmonia item-center">{{data.title}}</h3>
              {%- endif -%}
          </div>
        </div>
  
      <div class="bg-static">
        <div class="move"></div>
      </div>
      <div class="content">
      {%- if data.description -%}
        <div class='px-5 text-lg text-left text-black md:px-10 font-avenir'>{{data.description}}</div>
        {%- endif -%}
    </div>
  </div>
</div>
            
  <script>
    $(window).on("load resize scroll", function() {
    $(".bg-static").each(function() {
      var scrollTop = $(window).scrollTop();
      var elementTop = $(this).offset().top;
      var rightPos = scrollTop - elementTop;
      $(this)
        .find(".move")
        .css({ right:  rightPos });
      });
    });
  </script>

{% schema %}
{
    "name": "DM Before/After image", 
    "settings": [
    {
      "type": "text",
      "id": "pretitle",
      "label": "Pre Title"
    },
      {
        "type": "textarea",
        "id": "title",
        "label": "Title",
        "default": "Title"
      },
      {
        "type": "textarea",
        "id": "description",
        "label": "Description",
        "default": "Description"
      },
       {
            "type": "image_picker",
            "id": "image",
            "label": "Image"
      },
       {
            "type": "image_picker",
            "id": "image2",
            "label": "Image"
      },
      {
        "type": "checkbox",
        "id": "full_width",
        "label": "Full Width",
       "default": false
      }, 
      {
        "type": "checkbox",
        "id": "remove_padding",
        "label": "Remove Top Bottom Padding"
      },
      {
        "type": "color",
        "id": "background_color",
        "label": "Background Color",
        "default": "#ffffff"
      },
      {
        "type": "text",
        "id": "image_max_width",
        "label": "Image Max Width (Required)",
        "default": "600px"
      },
      {
        "type": "text",
        "id": "image_min_height",
        "label": "Image Min Height (Required)",
        "default": "500px"
      },
      {
        "type": "text",
        "id": "tag",
        "label": "Tag"
      }
    ],
    "blocks": [
      {
        "type": "buttons",
        "name": "Buttons",
        "settings": [
          {
            "type": "text",
            "id": "text",
            "label": "Text"
          },
          {
            "type": "url",
            "id": "url",
            "label": "Url"
          },
      {
        "type": "select",
        "id": "button_type",
        "label": "Button Type",
        "default": "primary",
        "options": [
          {
            "label": "primary",
            "value": "primary"
          },
          {
            "label": "secondary",
            "value": "secondary"
          }
        ]
      }
        ]
      }
    ],
    "presets": [
          {
            "name": "DM Before/After image"
          }
    ]
  }
{% endschema %}